<!DOCTYPE html>
<html lang="zh-Hans" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>线程池 | DevBeginner Doc</title>
    <meta name="description" content="面向编程初学者的帮助文档">
    <meta name="generator" content="VitePress v1.3.4">
    <link rel="preload stylesheet" href="/assets/style.2xEVQeFw.css" as="style">
    
    <script type="module" src="/assets/app.hYImd7IU.js"></script>
    <link rel="modulepreload" href="/assets/chunks/theme.BizOGDF5.js">
    <link rel="modulepreload" href="/assets/chunks/framework.GyrKTBAB.js">
    <link rel="modulepreload" href="/assets/Grammar-DataStructure_java_threadPoll.md.CxHHkDVX.lean.js">
    <link rel="preconnect" href="https://fonts.loli.net">
    <link rel="preconnect" href="https://gstatic.loli.net" crossorigin="">
    <link href="https://fonts.loli.net/css2?family=Noto+Sans+SC:wght@400..900&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.loli.net/css2?family=Fira+Code:wght@500&amp;display=swap" rel="stylesheet">
    <link rel="icon" href="/svg/main-img.svg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--[--><!--]--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-ab179fa1><a class="title" href="/" data-v-ab179fa1><!--[--><!--]--><!--[--><img class="VPImage logo" src="/svg/Logo_Thick.svg" alt data-v-8426fc1a><!--]--><span data-v-ab179fa1>DevBeginner Doc</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/main.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://www.hello-algo.com/" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Hello 算法</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://oi-wiki.org/" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Oi Wiki</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="http://acm.zzuli.edu.cn/" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>ZZULI OJ</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/DevBeginner-Doc/DevBeginner-Doc" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://qm.qq.com/q/tY8pIKOT6w" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><svg t="1721642690748" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20334" width="24" height="24"><path d="M512.26 0h-0.51C229.12 0 0 229.12 0 511.74v0.51C0 794.88 229.12 1024 511.74 1024h0.51C794.88 1024 1024 794.88 1024 512.26v-0.51C1024 229.12 794.88 0 512.26 0zM794.7 731.23c-15.53 1.88-60.45-70.31-60.45-70.31 0 41.81-21.74 96.36-68.81 135.71 17.61 5.39 39.18 13.65 53.08 23.75 12.46 9.11 10.89 18.4 8.64 22.15-9.83 16.45-169.13 10.51-215.11 5.39-46.01 5.12-205.28 11.06-215.15-5.36-2.25-3.75-3.82-13.08 8.64-22.19 13.89-10.1 35.46-18.36 53.04-23.72-47.07-39.39-68.81-93.93-68.81-135.71 0 0-44.92 72.16-60.45 70.31-7.24-0.85-16.76-39.53 12.59-132.95 7.02-21.69 14.71-43.16 23.04-64.38l31.06-76.66c-0.04-0.89-0.41-15.97-0.41-23.79 0-131.07 62.57-262.83 216.41-262.83S728.42 302.39 728.42 433.5c0 7.78-0.41 22.87-0.41 23.76l31.06 76.66c8.35 21.21 16.03 42.68 23.04 64.38h-0.03c29.35 93.44 19.86 132.08 12.62 132.93z" p-id="20335"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>主题</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/DevBeginner-Doc/DevBeginner-Doc" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://qm.qq.com/q/tY8pIKOT6w" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><svg t="1721642690748" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20334" width="24" height="24"><path d="M512.26 0h-0.51C229.12 0 0 229.12 0 511.74v0.51C0 794.88 229.12 1024 511.74 1024h0.51C794.88 1024 1024 794.88 1024 512.26v-0.51C1024 229.12 794.88 0 512.26 0zM794.7 731.23c-15.53 1.88-60.45-70.31-60.45-70.31 0 41.81-21.74 96.36-68.81 135.71 17.61 5.39 39.18 13.65 53.08 23.75 12.46 9.11 10.89 18.4 8.64 22.15-9.83 16.45-169.13 10.51-215.11 5.39-46.01 5.12-205.28 11.06-215.15-5.36-2.25-3.75-3.82-13.08 8.64-22.19 13.89-10.1 35.46-18.36 53.04-23.72-47.07-39.39-68.81-93.93-68.81-135.71 0 0-44.92 72.16-60.45 70.31-7.24-0.85-16.76-39.53 12.59-132.95 7.02-21.69 14.71-43.16 23.04-64.38l31.06-76.66c-0.04-0.89-0.41-15.97-0.41-23.79 0-131.07 62.57-262.83 216.41-262.83S728.42 302.39 728.42 433.5c0 7.78-0.41 22.87-0.41 23.76l31.06 76.66c8.35 21.21 16.03 42.68 23.04 64.38h-0.03c29.35 93.44 19.86 132.08 12.62 132.93z" p-id="20335"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><div class="VPFlyout VPNolebaseEnhancedReadabilitiesMenu VPNolebaseEnhancedReadabilitiesMenuFlyout" aria-label="阅读增强" role="menuitem" data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><span class="i-icon-park-outline:book-open option-icon" data-v-b6c34ac9></span><!----><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><!----><!--[--><!--]--></div></div></div><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0><svg t="1718853865331" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18955" width="20" height="20"><path d="M511.3 191.8H94c-16.4 0-29.8 13.3-29.8 29.7l-0.8 644.3c0 16.5 13.3 29.8 29.8 29.8h306.1l8.3 16.3c5.1 10 15.3 16.3 26.6 16.3h156c10.9 0 20.9-6 26.2-15.5l9.3-17h304c16.4 0 29.8-13.3 29.8-29.8V221.6c0-16.4-13.3-29.8-29.8-29.8H511.3z" fill="#7dc5eb" p-id="18956" data-spm-anchor-id="a313x.search_index.0.i18.7e613a81kxfIsN" class="selected"></path><path d="M517.8 189.4c-5.3 3.6-12.1 4.3-18 1.7-32.7-14.4-143.8-59.4-248.8-59.4H144.5c-10.2 0-18.5 8.3-18.5 18.5v666.6c0 10.2 8.3 18.5 18.5 18.5h328.3c5.4 0 10.5 2.3 14 6.4l8.8 10.1c7.3 8.4 20.3 8.5 27.7 0.3l9.8-10.7c3.5-3.9 8.5-6.1 13.7-6.1h328.8c10.2 0 18.5-8.3 18.5-18.5l0.9-666.6c0-10.3-8.3-18.6-18.5-18.6H764.2c0 0.1-155.6-4.1-246.4 57.8z" fill="#FFFFFF" p-id="18957"></path><path d="M511 894.1l-31.3-36c-3.5-4.1-8.6-6.4-14-6.4H126.6c-10.2 0-18.5-8.3-18.5-18.5V126.6c0-10.2 8.3-18.5 18.5-18.5H253c100.6 0 204.6 39 247.2 56.9 5.6 2.3 11.9 1.8 17-1.3 94.5-58.4 239.7-55.8 249.4-55.6h132.1c10.3 0 18.6 8.3 18.5 18.6l-1 706.6c0 10.2-8.3 18.5-18.5 18.5h-340c-5.2 0-10.2 2.2-13.7 6.1l-33 36.2z m-363-82.4h336c5.4 0 10.5 2.3 14 6.4 7.3 8.4 20.3 8.5 27.7 0.3l0.6-0.6c3.5-3.9 8.5-6.1 13.7-6.1h336.2l0.9-663.7H765.7c-1.6 0-159.7-3.5-242.2 59.7l-0.7 0.5c-5.5 4.2-13 5-19.3 2l-0.8-0.4C501 209 371.5 148 252.9 148H148v663.7z" fill="#8A8A8A" p-id="18958"></path><path d="M511.3 200.1v667.5" fill="#FFFFFF" p-id="18959"></path><path d="M491.3 200.1h40v667.5h-40z" fill="#8A8A8A" p-id="18960"></path><path d="M576 291.6h256v40H576z m0 151.5h256v40H576z m0 168.4h256v40H576z m-385-320h256v40H191z m0 151.6h256v40H191z m0 168.4h256v40H191z" fill="#CDCDCD" p-id="18961"></path></svg>序言</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Foreword/intention.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>编写初衷</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Foreword/prerequisites.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>入门须知</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0><svg t="1718729628985" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4789" width="22" height="22"><path d="M204.8 860.842667h568.832" fill="#FFFFFF" p-id="4790"></path><path d="M136.533333 217.429333h705.365334a34.133333 34.133333 0 0 1 34.133333 34.133334v432.469333A22.698667 22.698667 0 0 1 853.333333 706.730667H125.098667A22.698667 22.698667 0 0 1 102.4 684.032V251.562667a34.133333 34.133333 0 0 1 34.133333-34.133334z" fill="#FCFEFF" p-id="4791"></path><path d="M876.032 251.562667v432.298666A22.698667 22.698667 0 0 1 853.333333 706.730667H474.453333l178.176-489.301334h189.269334a34.133333 34.133333 0 0 1 34.133333 34.133334z" fill="#EDF4FF" p-id="4792"></path><path d="M716.8 860.842667H261.632a57.002667 57.002667 0 0 1 57.002667-56.832h341.333333A56.832 56.832 0 0 1 716.8 860.842667z" fill="#FFFFFF" p-id="4793"></path><path d="M598.528 706.730667h-218.453333l-27.306667 97.28h273.066667l-27.306667-97.28z" fill="#C3CFDE" p-id="4794"></path><path d="M876.032 251.562667v68.266666H102.4v-68.266666a34.133333 34.133333 0 0 1 34.133333-34.133334h705.365334a34.133333 34.133333 0 0 1 34.133333 34.133334z" fill="#96DDFF" p-id="4795"></path><path d="M841.898667 217.429333H652.629333l-37.205333 102.4h260.608v-68.266666a34.133333 34.133333 0 0 0-34.133333-34.133334z" fill="#69BAF9" p-id="4796"></path><path d="M716.8 860.842667H261.632a57.002667 57.002667 0 0 1 57.002667-56.832h341.333333A56.832 56.832 0 0 1 716.8 860.842667z" fill="#EDF4FF" p-id="4797"></path><path d="M782.165333 903.168a158.549333 158.549333 0 0 0 25.6-2.048 21.845333 21.845333 0 0 1 22.698667 10.581333 22.016 22.016 0 0 0 30.208 8.021334l36.010667-20.821334a22.186667 22.186667 0 0 0 7.850666-30.037333 22.186667 22.186667 0 0 1 2.048-25.088 160.256 160.256 0 0 0 25.6-44.544 22.016 22.016 0 0 1 21.162667-14.165333 22.186667 22.186667 0 0 0 22.186667-22.186667v-41.642667a22.186667 22.186667 0 0 0-22.186667-22.186666 22.016 22.016 0 0 1-20.650667-14.336 162.645333 162.645333 0 0 0-25.6-44.544 21.845333 21.845333 0 0 1-2.56-24.917334 22.357333 22.357333 0 0 0-8.192-30.378666l-36.010666-20.821334a22.016 22.016 0 0 0-30.208 8.192 22.016 22.016 0 0 1-22.698667 10.752 148.821333 148.821333 0 0 0-51.2 0 22.016 22.016 0 0 1-22.357333-10.752 22.186667 22.186667 0 0 0-30.208-8.192l-36.010667 20.821334a22.357333 22.357333 0 0 0-8.192 30.378666 21.845333 21.845333 0 0 1-2.048 24.917334A162.645333 162.645333 0 0 0 631.466667 684.714667a22.016 22.016 0 0 1-20.48 15.018666 22.186667 22.186667 0 0 0-22.186667 22.186667v40.96a22.186667 22.186667 0 0 0 22.186667 22.186667 22.016 22.016 0 0 1 20.650666 14.165333 160.256 160.256 0 0 0 25.6 44.544 22.186667 22.186667 0 0 1 2.048 25.088 22.186667 22.186667 0 0 0 8.192 30.208l36.010667 20.821333a22.016 22.016 0 0 0 30.378667-8.021333 21.845333 21.845333 0 0 1 22.698666-10.581333 158.549333 158.549333 0 0 0 25.6 1.877333z" fill="#79DEB4" p-id="4798"></path><path d="M975.530667 721.066667v41.642666a22.186667 22.186667 0 0 1-22.186667 22.186667 22.186667 22.186667 0 0 0-20.650667 14.336 162.645333 162.645333 0 0 1-25.6 44.544 22.528 22.528 0 0 0-4.949333 13.994667 20.992 20.992 0 0 0 2.901333 10.922666 22.357333 22.357333 0 0 1-8.192 30.378667l-36.010666 20.821333a22.016 22.016 0 0 1-30.208-8.192 22.016 22.016 0 0 0-22.698667-10.752 148.821333 148.821333 0 0 1-51.2 0 22.016 22.016 0 0 0-22.698667 10.752 22.186667 22.186667 0 0 1-30.208 8.192l-36.010666-20.821333a22.357333 22.357333 0 0 1-8.192-30.378667 20.821333 20.821333 0 0 0 2.389333-6.144l240.64-241.152a21.674667 21.674667 0 0 0 4.437333 18.773334 162.645333 162.645333 0 0 1 25.6 44.544 22.186667 22.186667 0 0 0 20.650667 14.336 22.186667 22.186667 0 0 1 22.186667 22.016z" fill="#62CCA1" p-id="4799"></path><path d="M782.165333 742.058667m-60.416 0a60.416 60.416 0 1 0 120.832 0 60.416 60.416 0 1 0-120.832 0Z" fill="#FCFEFF" p-id="4800"></path><path d="M159.232 268.629333m-17.066667 0a17.066667 17.066667 0 1 0 34.133334 0 17.066667 17.066667 0 1 0-34.133334 0Z" fill="#3D3D63" p-id="4801"></path><path d="M273.066667 268.629333m-17.066667 0a17.066667 17.066667 0 1 0 34.133333 0 17.066667 17.066667 0 1 0-34.133333 0Z" fill="#3D3D63" p-id="4802"></path><path d="M216.234667 268.629333m-17.066667 0a17.066667 17.066667 0 1 0 34.133333 0 17.066667 17.066667 0 1 0-34.133333 0Z" fill="#3D3D63" p-id="4803"></path><path d="M341.333333 516.266667l51.2-51.2a17.066667 17.066667 0 1 0-24.234666-24.234667l-63.488 63.658667a17.066667 17.066667 0 0 0 0 24.064l63.488 63.658666a17.066667 17.066667 0 0 0 24.234666 0 17.066667 17.066667 0 0 0 0-24.064zM585.728 591.872a17.066667 17.066667 0 0 0 24.064 0L673.450667 529.066667a17.066667 17.066667 0 0 0 0-24.064l-63.658667-63.658667a17.066667 17.066667 0 0 0-24.064 24.234667l51.2 51.2-51.2 51.2a17.066667 17.066667 0 0 0 0 23.893333zM529.066667 446.293333a17.066667 17.066667 0 0 0-23.381334 6.314667L442.709333 563.2a17.066667 17.066667 0 1 0 29.525334 17.066667l63.658666-110.08a17.066667 17.066667 0 0 0-6.826666-23.893334z" fill="#3D3D63" p-id="4804"></path><path d="M953.344 682.666667a4.949333 4.949333 0 0 1-4.608-3.242667 178.005333 178.005333 0 0 0-28.501333-49.322667 4.949333 4.949333 0 0 1 0-5.632 39.253333 39.253333 0 0 0-14.336-53.589333l-12.8-7.68V251.562667a51.2 51.2 0 0 0-51.2-51.2H136.533333a51.2 51.2 0 0 0-51.2 51.2v432.469333a39.936 39.936 0 0 0 39.765334 39.765333H358.4l-17.066667 63.146667h-22.698666a73.898667 73.898667 0 0 0-71.850667 56.832H204.8a17.066667 17.066667 0 0 0 0 34.133333h434.688a36.181333 36.181333 0 0 0 1.194667 12.117334 38.4 38.4 0 0 0 18.261333 23.893333l36.010667 20.821333a39.253333 39.253333 0 0 0 53.589333-14.506666 5.290667 5.290667 0 0 1 5.290667-2.389334 166.229333 166.229333 0 0 0 56.661333 0 5.12 5.12 0 0 1 5.290667 2.56 39.253333 39.253333 0 0 0 34.133333 19.456 38.741333 38.741333 0 0 0 19.626667-5.12l36.010666-20.821333a39.082667 39.082667 0 0 0 18.261334-23.893333 38.570667 38.570667 0 0 0-3.925334-29.696 5.12 5.12 0 0 1 0-5.802667 179.541333 179.541333 0 0 0 28.501334-49.152 4.778667 4.778667 0 0 1 4.608-3.242667 39.424 39.424 0 0 0 39.253333-39.253333v-41.642667A39.253333 39.253333 0 0 0 953.344 682.666667zM119.466667 251.562667a17.066667 17.066667 0 0 1 17.066666-17.066667h705.365334a17.066667 17.066667 0 0 1 17.066666 17.066667v51.2H119.466667z m5.632 438.101333a5.632 5.632 0 0 1-5.632-5.632V336.896h739.498666V546.133333a39.082667 39.082667 0 0 0-43.178666 17.066667 4.949333 4.949333 0 0 1-5.12 2.218667 175.274667 175.274667 0 0 0-56.661334 0 4.778667 4.778667 0 0 1-5.12-2.218667 39.082667 39.082667 0 0 0-53.589333-14.336l-36.010667 20.821333a38.229333 38.229333 0 0 0-18.261333 23.722667 39.594667 39.594667 0 0 0 3.754667 29.866667 4.608 4.608 0 0 1 0 5.632 178.005333 178.005333 0 0 0-28.501334 49.322666 4.949333 4.949333 0 0 1-4.608 3.242667 39.082667 39.082667 0 0 0-23.210666 7.68zM580.266667 786.944H375.466667l17.066666-63.146667h179.2v39.082667a39.594667 39.594667 0 0 0 8.533334 24.064z m-261.461334 34.133333h303.786667a187.733333 187.733333 0 0 0 13.312 22.698667H282.794667a39.765333 39.765333 0 0 1 35.84-22.698667z m639.658667-58.197333a5.12 5.12 0 0 1-5.12 5.12 39.424 39.424 0 0 0-36.693333 25.258667 144.384 144.384 0 0 1-22.869334 39.765333 39.424 39.424 0 0 0-3.584 44.373333 4.437333 4.437333 0 0 1 0 3.754667 4.949333 4.949333 0 0 1-2.389333 3.242667L852.309333 904.533333a5.12 5.12 0 0 1-6.997333-2.048 39.424 39.424 0 0 0-40.448-18.944 135.168 135.168 0 0 1-45.397333 0 39.424 39.424 0 0 0-40.448 19.114667 5.290667 5.290667 0 0 1-6.997334 1.877333l-36.010666-20.821333a4.949333 4.949333 0 0 1-2.389334-3.242667 4.437333 4.437333 0 0 1 0-3.754666 39.765333 39.765333 0 0 0-3.584-44.373334 142.506667 142.506667 0 0 1-23.04-39.765333A38.912 38.912 0 0 0 610.986667 768a5.12 5.12 0 0 1-5.12-5.12v-41.642667a4.949333 4.949333 0 0 1 5.12-5.12 39.253333 39.253333 0 0 0 36.522666-25.258666 140.117333 140.117333 0 0 1 23.04-39.765334 39.765333 39.765333 0 0 0 3.584-44.373333 4.778667 4.778667 0 0 1 0-3.925333 4.437333 4.437333 0 0 1 2.389334-3.072l36.010666-20.821334a4.778667 4.778667 0 0 1 2.56 0 5.12 5.12 0 0 1 4.266667 2.389334 39.594667 39.594667 0 0 0 40.448 19.114666 135.168 135.168 0 0 1 45.397333 0A39.765333 39.765333 0 0 0 845.312 580.266667a4.949333 4.949333 0 0 1 6.826667-1.706667l36.010666 20.821333a4.437333 4.437333 0 0 1 2.389334 3.072 4.778667 4.778667 0 0 1 0 3.925334 39.253333 39.253333 0 0 0 3.584 44.202666 145.237333 145.237333 0 0 1 22.869333 39.936A39.594667 39.594667 0 0 0 953.344 716.8a4.949333 4.949333 0 0 1 5.12 5.12z" fill="#3D3D63" p-id="4805"></path><path d="M782.165333 664.576a77.482667 77.482667 0 1 0 77.482667 77.482667 77.482667 77.482667 0 0 0-77.482667-77.482667z m0 120.832a43.349333 43.349333 0 1 1 43.349334-43.349333A43.349333 43.349333 0 0 1 782.165333 785.066667z" fill="#3D3D63" p-id="4806"></path></svg>环境搭建</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/introduction.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>引入</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/pre-knowledges.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>准备</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h3 class="text" data-v-b7550ba0>C/C++</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/c-cpp/overview.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/c-cpp/bloodshed-devcpp.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Dev C++</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/c-cpp/red-panda.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>小熊猫Dev C++</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/c-cpp/codeblocks.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>CodeBlocks</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/c-cpp/visual-studio.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Visual Studio</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/c-cpp/vs-code.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Visual Studio Code</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/c-cpp/sublime-text.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Sublime Text</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/c-cpp/vim-neovim.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Vim/Neovim</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h3 class="text" data-v-b7550ba0>Java</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/java/overview.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/java/eclipse.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Eclipse</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/java/idea.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>IntelliJ IDEA</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/java/vs-code.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Visual Studio Code</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/java/sublime-text.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Sublime Text</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/java/vim-neovim.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Vim/Neovim</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h3 class="text" data-v-b7550ba0>Python</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/python/overview.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/python/thonny.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Thonny</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/python/pycharm.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>PyCharm</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/python/py-idle.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Python IDLE</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/python/vs-code.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Visual Studio Code</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/python/sublime-text.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Sublime Text</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Environment/python/vim-neovim.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Vim/Neovim</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible has-active" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0><svg t="1718730049852" class="icon" viewBox="0 0 1126 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="26150" width="20" height="20"><path d="M396.117333 978.9952L547.157333 47.616l85.333334-38.263467-151.04 931.362134-85.333334 38.263466z" fill="#CECEF9" p-id="26151"></path><path d="M547.157333 47.616l95.232 32.938667 85.333334-38.263467L632.490667 9.386667l-85.333334 38.263466z" fill="#CECEF9" p-id="26152"></path><path d="M642.389333 80.554667l-151.057066 931.362133 85.333333-38.263467 151.04-931.362133-85.333333 38.263467z" fill="#CECEF9" p-id="26153"></path><path d="M491.332267 1011.9168l-95.232-32.938667 85.333333-38.229333 95.232 32.904533-85.333333 38.263467zM396.117333 978.9952l85.333334-38.263467-85.333334 38.263467zM136.789333 472.439467L376.046933 241.834667l85.333334-38.263467-239.2576 230.621867-85.333334 38.2464zM376.046933 241.834667l-68.4032-86.3232 85.333334-38.263467 68.4032 86.3232-85.333334 38.263467z" fill="#CECEF9" p-id="26154"></path><path d="M307.643733 155.511467L0 452.010667l85.333333-38.263467L392.977067 117.248l-85.333334 38.263467z" fill="#CECEF9" p-id="26155"></path><path d="M0 452.010667l307.643733 388.437333 85.333334-38.263467L85.333333 413.7472l-85.333333 38.263467z" fill="#CECEF9" p-id="26156"></path><path d="M307.643733 840.448l68.4032-65.877333 85.333334-38.263467-68.4032 65.877333-85.333334 38.263467zM376.046933 774.5536L136.789333 472.439467l85.333334-38.2464 239.2576 302.114133-85.333334 38.2464zM136.789333 472.439467l85.333334-38.2464-85.333334 38.2464zM726.954667 218.1632l307.6608 388.437333 85.333333-38.2464-307.6608-388.437333-85.333333 38.2464z" fill="#CECEF9" p-id="26157"></path><path d="M1034.615467 606.600533L726.954667 903.099733l85.333333-38.2464 307.6608-296.4992-85.333333 38.2464z" fill="#CECEF9" p-id="26158"></path><path d="M726.954667 903.099733l-68.386134-86.3232 85.333334-38.2464 68.386133 86.3232-85.333333 38.2464zM658.568533 816.776533l239.2576-230.6048 85.333334-38.263466-239.274667 230.621866-85.333333 38.2464z" fill="#CECEF9" p-id="26159"></path><path d="M897.826133 586.171733l-239.274666-302.1312 85.333333-38.2464 239.274667 302.114134-85.333334 38.263466z" fill="#CECEF9" p-id="26160"></path><path d="M658.568533 284.040533l68.386134-65.877333 85.333333-38.2464-68.386133 65.877333-85.333334 38.2464zM726.954667 218.1632l85.333333-38.2464-85.333333 38.2464z" fill="#CECEF9" p-id="26161"></path><path d="M396.117333 978.9952L547.157333 47.616l95.232 32.9216-151.057066 931.362133-95.232-32.938666zM136.772267 472.456533L376.046933 241.834667l-68.4032-86.3232L0 452.010667l307.643733 388.437333 68.4032-65.877333L136.789333 472.4224z m590.165333-254.293333l307.6608 388.437333-307.6608 296.4992-68.386133-86.3232 239.2576-230.6048-239.274667-302.1312 68.4032-65.877333z" fill="#4E5969" p-id="26162"></path></svg>语法基础&基础数据结构</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/introduction.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>引入</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h3 class="text" data-v-b7550ba0>C语言</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/c/overview.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/c/data-type.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>数据类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/c/operator.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>运算符</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/c/control.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>流程控制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/c/function.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/c/array.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>数组</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/c/pointer.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>指针</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/c/struct.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>结构体和链表</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h3 class="text" data-v-b7550ba0>C++</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/cpp/overview.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/cpp/base.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>基础语法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/cpp/in-out.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>输入输出</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/cpp/function.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/cpp/array-str.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>数组与字符串</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/cpp/pointer.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>指针与引用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/cpp/memory.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>内存管理</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h3 class="text" data-v-b7550ba0>Python</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/python/overview.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>概述</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed has-active" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h3 class="text" data-v-b7550ba0>Java</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/java/overview.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/java/primer.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>初步体验</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/java/annotation.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>注释</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/java/var-opt.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>变量与运算符</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/java/array.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>数组</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible collapsed" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h4 class="text" data-v-b7550ba0>面向对象</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-3 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/java/OOP.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>概述&面向对象三特性</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/java/ClassAndObject.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>类与对象</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/java/keyword.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>关键字</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/java/multithreading.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>多线程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Grammar-DataStructure/java/threadPoll.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>线程池</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0><svg t="1718733243585" class="icon" viewBox="0 0 1077 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="104076" width="20" height="20"><path d="M790.45614 736.561404m-287.438596 0a287.438596 287.438596 0 1 0 574.877193 0 287.438596 287.438596 0 1 0-574.877193 0Z" fill="#8CB4FE" p-id="104077"></path><path d="M910.291088 358.040702c-97.324912-27.773754-229.286175-48.559158-368.280702-41.624702h-41.705544c48.631018-69.398456 97.31593-131.862456 145.92-180.412632 76.458667-69.416421 111.202807-76.350877 125.089684-69.416421 13.886877 6.952421 27.800702 69.389474-6.952421 187.365053l69.470316 20.812351c41.768421-138.760982 34.78007-235.897263-20.839298-263.662035-34.717193-20.839298-97.262035-20.839298-208.437895 76.350877-69.479298 55.475649-132.02414 138.752-194.56 228.989754-27.800702 6.916491-48.666947 6.916491-76.458667 13.850948-48.64-138.778947-48.64-222.028351-27.773754-235.942176 13.886877-6.925474 69.479298 6.925474 159.81586 97.163228l48.631017-48.586105C409.986246 31.914667 326.575158-2.775579 271.018667 31.914667c-69.524211 34.699228-55.619368 159.600281-6.961404 305.313684-34.771088 6.916491-62.53586 13.877895-90.336561 20.839298C27.791719 399.683368 0 455.168 0 496.846596c0 62.437053 76.458667 117.939649 215.399298 152.638878l13.886877-69.362527C118.110316 552.358175 69.470316 517.658947 69.470316 503.745123c0-13.850947 27.827649-41.624702 125.089684-76.288 27.791719-6.988351 62.544842-13.913825 97.324912-20.812351 6.925474 20.812351 20.812351 48.523228 34.690246 76.288-41.678596 83.303298-76.395789 166.552702-90.309614 242.903579-34.78007 145.713404 0 201.216 34.726175 222.055298 13.904842 6.934456 27.818667 13.886877 41.705544 13.886877 48.631018 0 118.128281-41.624702 194.56-118.002526l-48.631017-48.550175C375.215158 885.427649 319.649684 899.323509 305.762807 892.362105c-13.904842-6.934456-27.791719-41.624702 0-145.713403 6.934456-62.464 27.773754-124.928 55.565474-194.317474 6.952421 13.877895 13.886877 20.812351 20.866245 34.717193C451.691789 705.032982 528.096561 809.085754 604.546246 878.484211c76.458667 69.416421 125.089684 90.228772 166.76828 90.228771 20.839298 0 34.753123-6.925474 41.678597-13.877894 55.592421-34.699228 62.544842-124.901053 20.839298-256.763509-20.839298-69.389474-55.529544-152.665825-97.235088-229.007719l-55.592421 34.690245c41.678596 76.377825 69.470316 152.665825 90.309614 215.129825 34.753123 117.975579 20.839298 173.487158 6.961404 180.439579-13.913825 6.925474-48.64 0-125.089684-69.389474-69.470316-62.464-145.928982-166.579649-208.446878-277.593824-20.839298-27.773754-34.78007-48.586105-41.705543-76.32393 6.952421-20.812351 20.866246-41.624702 34.753122-62.464 6.952421-6.925474 13.904842-20.812351 13.904842-27.737825h90.318597c132.015158 0 257.104842 13.877895 347.441403 41.624702 97.297965 27.764772 125.089684 62.464 125.089685 76.314947 0 20.839298-41.705544 55.538526-166.795228 83.303299l13.913824 69.371508c145.928982-34.699228 215.399298-90.210807 215.399298-152.674807 6.952421-48.577123-27.773754-104.061754-166.76828-145.713403z m-548.962807 41.651649c0-6.961404 0-6.961404 6.952421-6.961404l-6.952421 6.961404z m111.202807 97.127298c0 55.538526 41.678596 97.163228 97.271017 97.163228 55.592421 0 97.297965-41.651649 97.297965-97.163228 0-55.538526-41.705544-104.061754-97.324912-104.061754-55.565474 0-97.24407 48.523228-97.24407 104.061754z m125.089684 0c0 13.886877-13.904842 27.764772-27.818667 27.764772-13.886877 0-27.791719-13.877895-27.791719-27.755789 0-13.89586 13.904842-27.773754 27.755789-27.773755 13.949754 0 27.827649 6.952421 27.82765 27.764772h0.026947z" fill="#8a8a8a" p-id="104078" data-spm-anchor-id="a313x.search_index.0.i65.7e613a819ggm2r" class="selected"></path></svg>算法基础</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Algorithm/introduction.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>引入</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><p class="text" data-v-b7550ba0>Hello Algo</p><!----></div><!----></div><div class="VPSidebarItem level-1" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><p class="text" data-v-b7550ba0>Oi Wiki</p><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0><svg t="1718730903981" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="86643" width="22" height="22"><path d="M557.597 148.521a54.603 54.603 0 0 0-20.9 25.886 63.578 63.578 0 0 0 1.67 41.757 69.25 69.25 0 0 0 24.667 35.198 45.12 45.12 0 0 0 20.162 7.808 36.75 36.75 0 0 0 21.18-3.681 40.876 40.876 0 0 0 17.571-19.2 70.837 70.837 0 0 0 5.791-25.793 87.129 87.129 0 0 0-4.188-33.401 56.092 56.092 0 0 0-21.636-28.8 42.254 42.254 0 0 0-17.085-6.399 36.448 36.448 0 0 0-18.109 2.017 45.305 45.305 0 0 0-9.185 5.023" fill="#FFFFFF" p-id="86644"></path><path d="M873.57 600.998a468.41 468.41 0 0 0-26.336-91.578 262.727 262.727 0 0 0-32.7-61.883c-13.762-18.303-31.103-33.724-44.578-52.252-7.102-9.6-13.117-20.352-20.51-29.854a846.445 846.445 0 0 1-8.801-18.62c-8.888-19.358-16.962-39.198-27.52-57.598a185.116 185.116 0 0 0-5.15-8.54c-1.341-17.725-3.2-35.424-4.162-53.18a500.337 500.337 0 0 0-8.924-106.235 172.941 172.941 0 0 0-21.119-47.42 162.686 162.686 0 0 0-41.276-44.48A159.313 159.313 0 0 0 541.106 0.083a142.96 142.96 0 0 0-69.276 16 124.749 124.749 0 0 0-52.058 54.203 179.51 179.51 0 0 0-16.573 73.786c-0.834 24.959 1.475 49.918 2.402 74.908 0.962 25.947 0.445 51.996 2.59 77.882 0.702 8.35 1.664 16.67 1.628 25.056 0 4.162-0.256 8.381-0.322 12.544l-0.323 0.896a531.895 531.895 0 0 1-37.436 55.257 2415.978 2415.978 0 0 1-28.799 35.936 217.263 217.263 0 0 0-31.578 46.56 332.52 332.52 0 0 0-13.757 45.049l-0.354 1.28a350.055 350.055 0 0 1-19.936 51.197c-0.737 1.542-1.505 3.2-2.243 4.608a905.486 905.486 0 0 1-14.975 29.403l-5.985 11.233a182.275 182.275 0 0 0-10.014 20.858 69.028 69.028 0 0 0-3.712 13.28 70.197 70.197 0 0 0 1.792 28.8c0.61 2.365 1.31 4.669 2.114 6.973a151.08 151.08 0 0 0 8.704 20.095c1.536 2.975 3.2 5.918 4.766 8.832l1.44 2.109a293.4 293.4 0 0 0 4.924 8.227l0.195 0.323a237.07 237.07 0 0 0 6.016 9.052l0.291 0.42a645.015 645.015 0 0 0 6.4 8.729 231.507 231.507 0 0 0 43.964 87.579c-3.2 5.601-6.113 11.264-9.344 16.793a254.116 254.116 0 0 0-27.77 52.544 63.168 63.168 0 0 0-2.114 29.44 42.238 42.238 0 0 0 14.525 25.306 44.005 44.005 0 0 0 17.566 8.125 78.313 78.313 0 0 0 19.389 1.7 315.645 315.645 0 0 0 72.537-14.305 808.215 808.215 0 0 1 42.776-9.983 254.914 254.914 0 0 1 45.468-6.205c3.774 0 7.552 0 11.295-0.384a211.23 211.23 0 0 0 31.323 1.152l3.84-0.22c2.718 0.322 5.442 0.48 8.16 0.64 18.37 1.049 36.735 2.846 54.91 5.6a534.09 534.09 0 0 1 47.65 9.406 363.904 363.904 0 0 0 74.55 14.304 80.975 80.975 0 0 0 19.91-1.572 44.194 44.194 0 0 0 18.037-8.253 42.295 42.295 0 0 0 14.56-25.343 62.973 62.973 0 0 0-2.17-29.5 244.552 244.552 0 0 0-28.287-52.375c-4.03-6.79-7.777-13.732-11.775-20.48a363.131 363.131 0 0 0 45.085-62.614 61.463 61.463 0 0 0 22.783-2.883 95.515 95.515 0 0 0 47.993-35.997 54.853 54.853 0 0 0 8.032-16.42 108.765 108.765 0 0 0 15.355-39.1 195.581 195.581 0 0 0-1.705-69.536z" fill="#020204" p-id="86645"></path><path d="M447.204 287.006a39.683 39.683 0 0 0-7.137 15.068 79.874 79.874 0 0 0-2.079 16.64 147.173 147.173 0 0 1-2.785 33.34 102.565 102.565 0 0 1-17.248 31.327 190.077 190.077 0 0 0-30.176 54.137 96.047 96.047 0 0 0-3.487 37.313 394.859 394.859 0 0 0-34.748 62.81 343.359 343.359 0 0 0-28.256 104.694 267.263 267.263 0 0 0 18.815 130.616 214.007 214.007 0 0 0 55.74 77.657 190.733 190.733 0 0 0 40.732 27.038 182.582 182.582 0 0 0 163.603-1.603 318.082 318.082 0 0 0 69.435-54.879 241.854 241.854 0 0 0 35.198-40 224.452 224.452 0 0 0 29.403-97.656 318.558 318.558 0 0 0-18.78-176.525 194.844 194.844 0 0 0-35.198-50.589 277.221 277.221 0 0 0-22.399-75.322c-7.935-17.213-17.602-33.627-24.959-51.198-3.01-7.167-5.632-14.525-8.99-21.534a64.576 64.576 0 0 0-13.122-19.199 54.065 54.065 0 0 0-20.51-11.903 89.279 89.279 0 0 0-23.49-4.035c-15.999-0.798-31.998 1.28-47.803 0.64-12.8-0.512-25.307-2.718-37.979-1.981a58.545 58.545 0 0 0-18.559 3.901 37.39 37.39 0 0 0-15.262 11.038m5.16-138.28a25.87 25.87 0 0 0-15.999 7.137 36.1 36.1 0 0 0-9.307 15.042 91.06 91.06 0 0 0-2.079 35.454 104.579 104.579 0 0 0 5.601 31.743 41.44 41.44 0 0 0 8.606 13.568 29.623 29.623 0 0 0 13.757 8.125 27.826 27.826 0 0 0 14.976-0.543 32.47 32.47 0 0 0 12.8-7.808 43.134 43.134 0 0 0 10.879-19.004 75.358 75.358 0 0 0 2.529-21.918 91.388 91.388 0 0 0-4.224-27.263 61.386 61.386 0 0 0-13.951-23.679 39.51 39.51 0 0 0-10.685-8.002 26.331 26.331 0 0 0-12.959-2.847m105.33-0.005a54.603 54.603 0 0 0-20.9 25.886 63.578 63.578 0 0 0 1.67 41.757 69.25 69.25 0 0 0 24.667 35.198 45.12 45.12 0 0 0 20.162 7.808 36.75 36.75 0 0 0 21.18-3.681 40.876 40.876 0 0 0 17.571-19.2 70.837 70.837 0 0 0 5.791-25.793 87.129 87.129 0 0 0-4.188-33.401 56.092 56.092 0 0 0-21.636-28.8 42.254 42.254 0 0 0-17.085-6.399 36.448 36.448 0 0 0-18.109 2.017 45.305 45.305 0 0 0-9.185 5.023" fill="#FFFFFF" p-id="86646"></path><path d="M579.039 176.552a21.513 21.513 0 0 0-9.861 3.2 25.927 25.927 0 0 0-7.485 7.295 37.656 37.656 0 0 0-5.985 19.84 41.895 41.895 0 0 0 2.109 15.518 29.336 29.336 0 0 0 8.74 12.8 25.24 25.24 0 0 0 14.78 5.759 24.76 24.76 0 0 0 15.232-4.352 27.314 27.314 0 0 0 8.386-9.6 35.674 35.674 0 0 0 3.809-12.226 37.712 37.712 0 0 0-3.584-22.076 30.908 30.908 0 0 0-16.45-14.878 23.254 23.254 0 0 0-9.6-1.505" fill="#020204" p-id="86647"></path><path d="M452.324 148.521a25.87 25.87 0 0 0-16 7.137 36.1 36.1 0 0 0-9.307 15.042 91.06 91.06 0 0 0-2.079 35.454 104.579 104.579 0 0 0 5.601 31.743 41.44 41.44 0 0 0 8.606 13.568 29.623 29.623 0 0 0 13.757 8.125 27.826 27.826 0 0 0 14.976-0.543 32.47 32.47 0 0 0 12.8-7.808 43.134 43.134 0 0 0 10.879-19.004 75.358 75.358 0 0 0 2.529-21.918 91.388 91.388 0 0 0-4.224-27.263 61.386 61.386 0 0 0-13.951-23.679 39.51 39.51 0 0 0-10.685-8.002 26.331 26.331 0 0 0-12.959-2.847" fill="#FFFFFF" p-id="86648"></path><path d="M437.958 197.794a44.926 44.926 0 0 0 1.28 22.399 37.618 37.618 0 0 0 7.935 12.8 26.235 26.235 0 0 0 7.746 6.015 14.387 14.387 0 0 0 9.6 1.214 14.156 14.156 0 0 0 7.424-4.992 24.44 24.44 0 0 0 4.065-8.095 44.998 44.998 0 0 0-0.42-26.459 34.472 34.472 0 0 0-10.112-16.444 20.018 20.018 0 0 0-8.191-4.286 14.284 14.284 0 0 0-9.282 0.738 15.75 15.75 0 0 0-7.168 7.234 32.94 32.94 0 0 0-2.975 9.886" fill="#020204" p-id="86649"></path><path d="M423.975 291.066a9.109 9.109 0 0 0 1.086 2.816 12.764 12.764 0 0 0 3.742 3.773c1.408 1.024 2.914 1.854 4.383 2.786a79.234 79.234 0 0 1 19.808 19.199 124.35 124.35 0 0 0 24.38 27.677 51.403 51.403 0 0 0 24.381 8.735 79.782 79.782 0 0 0 30.335-3.523 107.167 107.167 0 0 0 26.014-11.422 271.81 271.81 0 0 1 45.146-29.597c3.712-1.342 7.552-2.335 11.105-3.999a17.484 17.484 0 0 0 8.637-7.741 37.2 37.2 0 0 0 2.114-11.105c0.574-3.999 1.854-7.9 2.56-11.868a19.977 19.977 0 0 0-0.926-11.939 15.431 15.431 0 0 0-7.01-6.973 23.981 23.981 0 0 0-9.599-2.401 143.098 143.098 0 0 0-19.998 1.986c-8.857 0.799-17.76-0.322-26.654 0-11.033 0.323-21.948 2.816-32.986 3.2-12.605 0.61-25.18-1.346-37.79-1.858a78.03 78.03 0 0 0-16.352 0.768 37.774 37.774 0 0 0-15.165 5.857 145.356 145.356 0 0 0-11.903 10.623 30.299 30.299 0 0 1-6.559 4.51 16.947 16.947 0 0 1-7.71 1.823 12.492 12.492 0 0 0-4.096 0 5.54 5.54 0 0 0-2.14 1.342 12.441 12.441 0 0 0-1.603 2.017 35.158 35.158 0 0 0-2.913 5.217" fill="#D99A03" p-id="86650"></path><path d="M451.75 263.168a194.885 194.885 0 0 0-13.024 8.576 16.035 16.035 0 0 0-5.601 5.663 13.306 13.306 0 0 0-1.024 5.565c0.107 1.9 0.107 3.799 0 5.693-0.16 1.28-0.512 2.56-0.579 3.87a6.4 6.4 0 0 0 0.195 1.92 4.045 4.045 0 0 0 0.926 1.695 4.9 4.9 0 0 0 2.176 1.25c0.799 0.255 1.628 0.383 2.463 0.573a24.232 24.232 0 0 1 10.337 6.016c3.01 2.687 5.698 5.729 8.831 8.289a49.667 49.667 0 0 0 30.622 9.922 138.065 138.065 0 0 0 32.382-4.51A195.847 195.847 0 0 0 544 310.874a109.4 109.4 0 0 0 33.79-20.126 115.86 115.86 0 0 1 13.788-11.422c4.48-2.816 9.6-4.675 14.049-7.363 0.41-0.235 0.809-0.501 1.177-0.798s0.681-0.666 0.901-1.086a3.195 3.195 0 0 0 0-2.401 6.45 6.45 0 0 0-0.993-2.017 14.51 14.51 0 0 0-1.884-1.92 30.156 30.156 0 0 0-17.469-6.052c-6.4-0.481-12.58 0-18.754-1.182a122.593 122.593 0 0 1-16.956-4.926 123.628 123.628 0 0 0-18.022-4.382 119.035 119.035 0 0 0-43.354 1.06 126.674 126.674 0 0 0-38.399 14.975" fill="#604405" p-id="86651"></path><path d="M450.342 248.034a79.49 79.49 0 0 0-17.15 15.646 37.026 37.026 0 0 0-6.785 11.392 86.171 86.171 0 0 0-2.206 10.24 19.046 19.046 0 0 0-0.574 3.87c0 0.65 0.098 1.295 0.287 1.92a4.362 4.362 0 0 0 0.993 1.695 5.424 5.424 0 0 0 2.883 1.438c1.054 0.226 2.14 0.256 3.2 0.384a30.156 30.156 0 0 1 13.372 5.694c4.035 2.785 7.742 5.985 11.873 8.606a62.031 62.031 0 0 0 30.811 8.765 137.717 137.717 0 0 0 32.158-3.2 144.716 144.716 0 0 0 24.8-6.973 148.832 148.832 0 0 0 33.79-20.126 141.393 141.393 0 0 0 13.788-11.422c1.47-1.408 2.882-2.883 4.45-4.163a16.05 16.05 0 0 1 5.247-3.04 19.455 19.455 0 0 1 9.18-0.16c2.268 0.502 4.587 0.769 6.911 0.8a10.25 10.25 0 0 0 3.426-0.543 6.963 6.963 0 0 0 2.815-2.018 6.721 6.721 0 0 0 1.47-4.254 8.632 8.632 0 0 0-1.244-4.352 14.888 14.888 0 0 0-7.04-5.662 69.373 69.373 0 0 0-12.032-3.523 172.69 172.69 0 0 1-36.191-13.22c-5.724-2.846-11.29-5.98-16.957-9.02a99.923 99.923 0 0 0-18.017-8.003 70.812 70.812 0 0 0-43.36 1.951 92.832 92.832 0 0 0-39.964 27.355" fill="#F5BD0C" p-id="86652"></path><path d="M522.531 230.463c0.763 2.494 4.767 2.079 7.07 3.2 2.3 1.121 3.651 3.2 5.92 3.395s5.57-0.768 5.856-2.914c0.384-2.846-3.773-4.674-6.4-5.693a13.67 13.67 0 0 0-11.104-0.225c-0.773 0.445-1.603 1.408-1.342 2.237z m-38.178-1.408c-2.974-0.962-7.869 4.255-6.4 6.943 0.45 0.737 1.792 1.664 2.688 1.182 0.896-0.48 2.494-3.455 3.968-4.48 1.121-0.732 0.896-3.291-0.256-3.645z" fill="#CD8907" p-id="86653"></path><path d="M959.388 848.499a56.712 56.712 0 0 1-9.405 15.84 102.6 102.6 0 0 1-33.059 23.449 655.292 655.292 0 0 0-61.53 32.48 252.984 252.984 0 0 0-36.289 29.213 290.584 290.584 0 0 1-29.5 26.782 84.86 84.86 0 0 1-36.734 15.549 88.06 88.06 0 0 1-47.773-7.23 57.331 57.331 0 0 1-26.587-20.801 62.492 62.492 0 0 1-7.454-33.15 345.162 345.162 0 0 1 7.265-60.383c2.938-16.604 5.76-33.243 7.551-50.041a515.256 515.256 0 0 0 1.06-91.926 69.68 69.68 0 0 1 0-15.39 19.552 19.552 0 0 1 19.9-18.242 71.575 71.575 0 0 1 14.177 1.178 299.737 299.737 0 0 1 33.054 5.729c6.814 1.792 13.47 4.188 20.29 6.051a93.15 93.15 0 0 0 34.968 3.2 270.55 270.55 0 0 1 37.502-5.888 55.52 55.52 0 0 1 15.324 2.688 32.649 32.649 0 0 1 13.762 7.68 30.135 30.135 0 0 1 6.4 10.234 62.142 62.142 0 0 1 3.906 17.536c0.174 5.355 0.635 10.695 1.377 15.999a52.222 52.222 0 0 0 11.775 23.167 149.851 149.851 0 0 0 19.005 17.791c6.692 5.632 13.409 11.202 20.607 16 3.39 2.298 6.881 4.48 10.081 7.004a31.753 31.753 0 0 1 8.161 9.087 22.594 22.594 0 0 1 2.268 15.994" fill="#F5BD0C" p-id="86654"></path><path d="M959.388 848.499a56.712 56.712 0 0 1-9.405 15.84 102.6 102.6 0 0 1-33.059 23.449 655.292 655.292 0 0 0-61.53 32.48 252.984 252.984 0 0 0-36.289 29.213 290.584 290.584 0 0 1-29.5 26.782 84.86 84.86 0 0 1-36.734 15.549 88.06 88.06 0 0 1-47.773-7.23 57.331 57.331 0 0 1-26.587-20.801 62.492 62.492 0 0 1-7.454-33.15 345.162 345.162 0 0 1 7.265-60.383c2.938-16.604 5.76-33.243 7.551-50.041a515.256 515.256 0 0 0 1.06-91.926 69.68 69.68 0 0 1 0-15.39 19.552 19.552 0 0 1 19.9-18.242 71.575 71.575 0 0 1 14.177 1.178 299.737 299.737 0 0 1 33.054 5.729c6.814 1.792 13.47 4.188 20.29 6.051a93.15 93.15 0 0 0 34.968 3.2 270.55 270.55 0 0 1 37.502-5.888 55.52 55.52 0 0 1 15.324 2.688 32.649 32.649 0 0 1 13.762 7.68 30.135 30.135 0 0 1 6.4 10.234 62.142 62.142 0 0 1 3.906 17.536c0.174 5.355 0.635 10.695 1.377 15.999a52.222 52.222 0 0 0 11.775 23.167 149.851 149.851 0 0 0 19.005 17.791c6.692 5.632 13.409 11.202 20.607 16 3.39 2.298 6.881 4.48 10.081 7.004a31.753 31.753 0 0 1 8.161 9.087 22.594 22.594 0 0 1 2.268 15.994M263.03 678.43a30.376 30.376 0 0 1 17.054-1.571 42.105 42.105 0 0 1 16 6.753 100.604 100.604 0 0 1 23.453 25.307c15.615 21.498 30.621 43.446 44.255 66.235 11.039 18.492 21.18 37.6 33.95 54.97 8.32 11.33 17.724 21.857 26.11 33.151a114.248 114.248 0 0 1 19.522 37.15 74.467 74.467 0 0 1-5.442 53.307 70.346 70.346 0 0 1-25.983 27.867 66.926 66.926 0 0 1-36.796 9.6 180.427 180.427 0 0 1-58.335-18.401c-38.685-15.42-80.729-20.249-120.596-32.25-12.257-3.68-24.32-8.063-36.638-11.458a108.36 108.36 0 0 1-16.224-5.18 28.077 28.077 0 0 1-12.8-10.752 24.319 24.319 0 0 1-3.2-12.8 39.56 39.56 0 0 1 2.591-12.8c3.005-8.258 7.838-15.743 11.105-23.904a100.348 100.348 0 0 0 5.565-42.36c-0.706-14.341-3.2-28.544-4.034-42.88-0.63-6.399-0.425-12.85 0.609-19.198a28.804 28.804 0 0 1 24.222-24.642 78.23 78.23 0 0 1 17.663-1.121 167.776 167.776 0 0 0 17.725 0 40.585 40.585 0 0 0 16.926-4.736 40.108 40.108 0 0 0 12.16-11.484 139.376 139.376 0 0 0 8.703-14.402 91.916 91.916 0 0 1 9.154-14.11 34.866 34.866 0 0 1 13.183-10.24" fill="#F5BD0C" p-id="86655"></path><path d="M263.03 678.43a30.376 30.376 0 0 1 17.054-1.572 42.105 42.105 0 0 1 16 6.753 100.604 100.604 0 0 1 23.453 25.307c15.615 21.498 30.621 43.446 44.255 66.235 11.039 18.492 21.18 37.6 33.95 54.97 8.32 11.33 17.724 21.857 26.11 33.151a114.248 114.248 0 0 1 19.522 37.15 74.467 74.467 0 0 1-5.442 53.307 70.346 70.346 0 0 1-25.983 27.867 66.926 66.926 0 0 1-36.796 9.6 180.427 180.427 0 0 1-58.335-18.401c-38.685-15.42-80.729-20.249-120.596-32.25-12.257-3.68-24.32-8.063-36.638-11.458a108.36 108.36 0 0 1-16.224-5.18 28.077 28.077 0 0 1-12.8-10.752 24.319 24.319 0 0 1-3.2-12.8 39.56 39.56 0 0 1 2.591-12.8c3.005-8.258 7.838-15.743 11.105-23.904a100.348 100.348 0 0 0 5.565-42.36c-0.706-14.341-3.2-28.544-4.034-42.88-0.63-6.399-0.425-12.85 0.609-19.198a28.804 28.804 0 0 1 24.222-24.642 78.23 78.23 0 0 1 17.663-1.121 167.776 167.776 0 0 0 17.725 0 40.585 40.585 0 0 0 16.926-4.736 40.108 40.108 0 0 0 12.16-11.484 139.376 139.376 0 0 0 8.703-14.402 91.916 91.916 0 0 1 9.154-14.11 34.866 34.866 0 0 1 13.183-10.24" fill="#F5BD0C" p-id="86656"></path><path d="M271.477 687.804a26.183 26.183 0 0 1 15.457-1.024 36.243 36.243 0 0 1 13.982 6.845 88.419 88.419 0 0 1 19.548 24.288c13.28 21.503 26.238 43.201 38.398 65.375a433.093 433.093 0 0 0 29.536 49.053c7.552 10.168 16.189 19.486 23.9 29.53a99.728 99.728 0 0 1 18.016 33.182 65.375 65.375 0 0 1-4.992 47.547 63.352 63.352 0 0 1-23.997 25.082 61.724 61.724 0 0 1-33.693 8.32 188.5 188.5 0 0 1-53.404-16.537c-33.755-12.262-70.392-13.89-104.95-23.459-12.416-3.353-24.51-7.869-36.991-11.002a112.605 112.605 0 0 1-16.384-4.736 26.556 26.556 0 0 1-13.025-10.562 23.116 23.116 0 0 1-2.815-12.221 38.194 38.194 0 0 1 2.718-12.354c3.006-7.905 7.741-15.068 10.782-22.973a88.624 88.624 0 0 0 4.322-37.855c-0.86-12.795-3.2-25.436-3.84-38.204a65.257 65.257 0 0 1 0.768-17.09 29.336 29.336 0 0 1 7.68-15.068 29.89 29.89 0 0 1 16.639-7.71 77.078 77.078 0 0 1 18.559 0c6.17 0.747 12.38 1.04 18.59 0.86a34.866 34.866 0 0 0 17.602-5.37 35.183 35.183 0 0 0 10.849-12.8 135.617 135.617 0 0 0 6.594-15.426 72.977 72.977 0 0 1 7.424-15.073 29.065 29.065 0 0 1 12.8-10.808" fill="#F5BD0C" p-id="86657"></path></svg>Linux初阶</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Linux/introduction.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>引入</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Linux/install.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/Linux/package-mgr.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>包管理器</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>页面导航</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _Grammar-DataStructure_java_threadPoll" data-v-39a288b8><div><h1 id="线程池" tabindex="-1">线程池 <a class="header-anchor" href="#线程池" aria-label="Permalink to &quot;线程池&quot;">​</a></h1><hr><h2 id="线程回顾" tabindex="-1">线程回顾 <a class="header-anchor" href="#线程回顾" aria-label="Permalink to &quot;线程回顾&quot;">​</a></h2><hr><p>创建线程的方式</p><ul><li>继承 Thread 类</li><li>实现 Runnable 接口</li></ul><p>创建后的线程有如下状态：</p><p>NEW：新建的线程，无任何操作</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread thread </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;is running&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread.State state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 线程刚创建还未执行，状态为 NEW</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>RUNNABLE：可执行的线程，在 JVM 中执行但是在等待操作系统的资源</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Thread thread </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;is running&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Thread.State state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 调用 start() 方法,可以执行，但不代表一定在执行</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>BOLCKED：阻塞，获取不到锁</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread thread1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Test.class) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (InterruptedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread thread2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Test.class) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        thread1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        thread2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 等待，保证 线程1 开始执行</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (InterruptedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread.State state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> thread2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>WAITING：等待，等待其他线程进行操作，时间不确定</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread thread </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LockSupport</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">park);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 等待线程开始执行</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (InterruptedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread.State state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 等待状态解除禁止，线程执行完毕</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LockSupport.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unpark</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(thread);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (InterruptedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>TIMED_WAITING：等待，等待的时间是确定的</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread thread </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (InterruptedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (InterruptedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread.State state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>TERMINATED：终止，线程已经运行完毕</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread thread </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;is running&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 等待线程执行完毕</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (InterruptedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread.State state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><h2 id="引入线程池" tabindex="-1">引入线程池 <a class="header-anchor" href="#引入线程池" aria-label="Permalink to &quot;引入线程池&quot;">​</a></h2><hr><p>上述创建线程的方式存在如下缺陷：</p><ul><li>线程使用完后会被销毁，高并发场景下频繁创建和销毁线程的性能开销不可忽略</li><li>无法控制线程并发数量，线程过多会导致 JVM 宕机</li></ul><p>线程池是一种池化思想，由于创建和销毁线程需要时间，以及系统资源开销，我们需要一个“管理者&quot;来统一管理线程及任务分配，减少这些开销，解决资源不足的问题。</p><p>在主要大厂的编程规范中，不允许在应用中自行显式地创建线程，线程必须通过线程池提供。</p><hr><h3 id="线程池解决了什么问题" tabindex="-1">线程池解决了什么问题 <a class="header-anchor" href="#线程池解决了什么问题" aria-label="Permalink to &quot;线程池解决了什么问题&quot;">​</a></h3><hr><ul><li>降低系统资源消耗，通过重用已存在的线程，降低线程创建和销毁造成的消耗：</li><li>提高系统响应速度，当有任务到达时，通过复用已存在的线程，无需等待新线程的创建便能立即执行：</li><li>方便线程并发数的管控。因为线程若是无限制的创建，可能会导致内存占用过多而产生OOM</li><li>节省CPU切换线程的时间成本（需要保持当前执行线程的现场，并恢复要执行线程的现场）。</li><li>提供更强大的功能，延时定时线程池</li></ul><hr><h3 id="线程池引发了什么问题" tabindex="-1">线程池引发了什么问题 <a class="header-anchor" href="#线程池引发了什么问题" aria-label="Permalink to &quot;线程池引发了什么问题&quot;">​</a></h3><hr><ul><li>异步任务提交后，如果JVM宕机，已提交的任务会丢失，需要考虑确认机制</li><li>使用不合理可能导致内存溢出问题</li><li>参数过多，代码结构引入数据结构与算法，增加使用难度</li></ul><hr><h2 id="线程池概述" tabindex="-1">线程池概述 <a class="header-anchor" href="#线程池概述" aria-label="Permalink to &quot;线程池概述&quot;">​</a></h2><hr><h3 id="线程池继承结构" tabindex="-1">线程池继承结构 <a class="header-anchor" href="#线程池继承结构" aria-label="Permalink to &quot;线程池继承结构&quot;">​</a></h3><hr><p><img src="https://lys2021.com/wp-content/uploads/2024/06/image-20240625142529340.png" alt="image-20240625142529340" loading="lazy"></p><ul><li>最常用的是 ThreadPoolExecutor</li><li>调度用 ScheduledThreadPoolExecutor，类似 Timer 和 TimerTask。</li><li>任务拆分合并用 ForkJoinPool</li><li>Executors是工具类，协助创建线程池的</li></ul><hr><h3 id="线程池工作状态" tabindex="-1">线程池工作状态 <a class="header-anchor" href="#线程池工作状态" aria-label="Permalink to &quot;线程池工作状态&quot;">​</a></h3><hr><p><img src="https://lys2021.com/wp-content/uploads/2024/06/image-20240625144239291.png" alt="image-20240625144239291" loading="lazy"></p><ul><li><p>RUNNING（运行状态)：这是线程池的初始状态。</p><ul><li>在此状态下，线程池接受新任务，并且也会处理等待队列中的任务。</li><li>线程池的线程会一直运行，直到被转换到其他状态。</li></ul></li><li><p>SHUTDOWN（关闭状态）：当调用线程池的shutdown()方法时，线程池会进入此状态。</p><ul><li>在此状态下，线程池不接受新任务，但会继续处理等待队列中的任务。</li><li>等待队列中的任务处理完毕后，线程池中的线程会逐渐结束，直到所有线程结束运行。</li></ul></li><li><p>STOP（停止状态）：当调用线程池的shutdownNow()方法时，线程池会进入此状态。</p><ul><li>在此状态下，线程池不接受新任务，同时也不处理等待队列中的任务</li><li>而是尝试停止所有正在执行的任务，并且回收线程池中的所有线程。</li></ul></li><li><p>TIDYING（整理状态）：当所有的任务已经终止，workerCount（工作线程数）为0时，线程池会进入此状态。</p><ul><li>此时，会执行terminated()钩子方法，允许线程池执行一些收尾工作。</li></ul></li><li><p>TERMINATED（终止状态）：terminated()钩子方法执行完毕后，线程池会进入此状态。</p><ul><li>在终止状态下，线程池的任务完全结束，不再有任何活动。</li></ul></li></ul><hr><h3 id="七个核心参数" tabindex="-1">七个核心参数 <a class="header-anchor" href="#七个核心参数" aria-label="Permalink to &quot;七个核心参数&quot;">​</a></h3><hr><table tabindex="0"><thead><tr><th>参数名</th><th>描述</th></tr></thead><tbody><tr><td><code>corePoolSize</code></td><td>核心线程池基本大小，核心线程数</td></tr><tr><td><code>maximumPoolSize</code></td><td>线程池最大线程数</td></tr><tr><td><code>keepAliveTime</code></td><td>线程空闲后的存活时间</td></tr><tr><td><code>TimeUnit unit</code></td><td>线程空闲后的存活时间单位</td></tr><tr><td><code>BlockingQueue workQueue</code></td><td>存放任务的阻塞队列</td></tr><tr><td><code>ThreadFactory threadFactory</code></td><td>创建线程的工厂</td></tr><tr><td><code>RejectedExecutionHandler handler</code></td><td>当阻塞队列和最大线程池都满了之后的饱和策略</td></tr></tbody></table><hr><h4 id="corepoolsize" tabindex="-1">corePoolSize <a class="header-anchor" href="#corepoolsize" aria-label="Permalink to &quot;corePoolSize&quot;">​</a></h4><hr><p>核心线程数</p><ul><li>线程池刚创建时，线程数量为0，当每次执行 execute 添加新的任务时会在线程池创建一个新的线 程，直到线程数量达到 corePoolSize 为止。</li><li>核心线程会一直存活，即使没有任务需要执行，当线程数小于核心线程数时，即使有线程空闲，线程 池也会优先创建新线程处理</li><li>设置 allowCoreThreadTimeout=true （默认false）时，核心线程超时会关闭</li></ul><hr><h4 id="maximumpoolsize" tabindex="-1">maximumPoolSize <a class="header-anchor" href="#maximumpoolsize" aria-label="Permalink to &quot;maximumPoolSize&quot;">​</a></h4><hr><p>最大线程数</p><ul><li>当池中的线程数 &gt;= corePoolSize ，且任务队列已满时。线程池会创建新线程来处理任务</li><li>当池中的线程数 = maximumPoolSize ，且任务队列已满时，线程池会拒绝处理任务而抛出异常</li></ul><p>如果使用无界的阻塞队列，该参数不生效</p><hr><h4 id="blockingqueue" tabindex="-1">BlockingQueue <a class="header-anchor" href="#blockingqueue" aria-label="Permalink to &quot;BlockingQueue&quot;">​</a></h4><hr><p>阻塞队列</p><ul><li>当线程池正在运行的线程数量已经达到 corePoolSize ，那么再通过 execute 添加新的任务则会被加到 workQueue 队列中</li><li>任务会在队列中排队等待执行，而不会立即执行</li><li>一般来说，这里的阻塞队列有以下几种选择：ArrayBlockingQueue ， LinkedBlockingQueue ， SynchronousQueue</li></ul><hr><h4 id="keepalivetime-timeunit" tabindex="-1">keepAliveTime &amp; TimeUnit <a class="header-anchor" href="#keepalivetime-timeunit" aria-label="Permalink to &quot;keepAliveTime &amp; TimeUnit&quot;">​</a></h4><hr><p>保活时间及其单位</p><ul><li>当线程空闲时间达到 keepAliveTime 时，线程会退出，直到线程数量 =corePoolSize</li><li>如果 allowCoreThreadTimeout=true ，则会直到线程数量=0</li></ul><p>keepAliveTime 是时间的大小，TimeUnit 是时间单位</p><hr><h4 id="threadfactory" tabindex="-1">ThreadFactory <a class="header-anchor" href="#threadfactory" aria-label="Permalink to &quot;ThreadFactory&quot;">​</a></h4><hr><p>线程工厂</p><ul><li>主要用来创建线程</li><li>通过newThread()方法提供创建线程，该方法创建的线程都是“非守护线程”而且“线程优先级都是默认优先级”</li></ul><hr><h4 id="rejectedexecutionhandler" tabindex="-1">RejectedExecutionHandler <a class="header-anchor" href="#rejectedexecutionhandler" aria-label="Permalink to &quot;RejectedExecutionHandler&quot;">​</a></h4><hr><p>拒绝策略</p><ul><li>当线程数已经达到 maxPoolSize ，且队列已满，会拒绝新任务</li><li>当线程池被调用 shutdown() 后，会等待线程池里的任务执行完毕，再 shutdown 。如果在调用shutdown() 和线程池真正 shutdown 之间提交任务，会拒绝新任务</li><li>当拒绝处理任务时线程池会调用 rejectedExecutionHandler 来处理这个任务。</li></ul><p>如果没有设置默认是 AbortPolicy ，另外在 ThreadPoolExecutor 类有几个内部实现类来处理这类情况：</p><ul><li>ThreadPoolExecutor.AbortPolicy ：丢弃任务并抛出 RejectedExecutionException 异常。</li><li>ThreadPoolExecutor.CallerRunsPolicy ：由调用线程处理该任务</li><li>ThreadPoolExecutor.DiscardPolicy ：也是丢弃任务，但是不抛出异常</li><li>ThreadPoolExecutor.DiscardOldestPolicy ：丢弃队列最前面的任务，然后重新尝试执行任务</li></ul><p>另外实现 RejectedExecutionHandler 接口即可实现自定义的拒绝策略</p><hr><h3 id="线程池逻辑结构" tabindex="-1">线程池逻辑结构 <a class="header-anchor" href="#线程池逻辑结构" aria-label="Permalink to &quot;线程池逻辑结构&quot;">​</a></h3><hr><p>线程池的编程模式下，任务是提交给整个线程池，而不是直接提交给某个线程，线程池在拿到任务后，就在内部协调空闲的线程，如果有，则将任务交给某个空闲的华线程。</p><p>一个线程同时只能执行一个任务，但可以同时向一个线程池提交多个任务。<img src="https://lys2021.com/wp-content/uploads/2024/06/image-20240625164308135.png" alt="image-20240625164308135" loading="lazy"></p><p>当一个任务被提交，线程池会进行如下工作：</p><ul><li><p>首先判断当前的核心线程数量如果小于核心线程数，创建一个核心线程并执行任务</p></li><li><p>如果大于核心线程数，则尝试将其放入等待队列，如果队列没有满则放入队列等待执行</p></li><li><p>如果队列已满，则判断非核心线程数的数量+核心线程数是否小于最大线程数量</p></li><li><p>小于：则创建一个非核心线程并执行任务（并不会取队列中的任务）</p></li><li><p>大于：执行拒绝策略</p></li></ul><hr><h3 id="线程池线程数设置" tabindex="-1">线程池线程数设置 <a class="header-anchor" href="#线程池线程数设置" aria-label="Permalink to &quot;线程池线程数设置&quot;">​</a></h3><hr><p>虽然使用线程池的好处很多，但是如果其线程数配置得不合理，不仅可能达不到预期效果，反而可能降低应用的性能。</p><p>因此按照任务类型分类，对不同的任务类型确定不同的线程数量。</p><hr><h4 id="任务类型分类" tabindex="-1">任务类型分类 <a class="header-anchor" href="#任务类型分类" aria-label="Permalink to &quot;任务类型分类&quot;">​</a></h4><hr><ul><li>IO密集型任务： <ul><li>此类任务主要是执行 IO 操作。由于执行 lO 操作的时间较长，导致 CPU 的利用率不高，这类任务 CPU 常处于空闲状态。</li><li>Netty 的 IO 读写操作为此类任务的典型例子</li></ul></li><li>CPU 密集型任务： <ul><li>此类任务主要是执行计算任务。由于响应时间很快，CPU 一直在运行，这种任务 CPU 的利用率很高。</li><li>例如设计加密解密算法等大量需要 CPU 运算的场景</li></ul></li><li>混合型任务： <ul><li>此类任务既要执行逻辑计算，又要进行 IO 操作（如 RPC 调用、数据库访问）相对来说，由于执行 IO 操作的耗时较长（一次网络往返往往在数百毫秒级别)，这类任务的 CPU 利用率也不是太高。</li><li>Web 服务器的 HTTP 请求处理操作为此类任务的典型例子</li></ul></li></ul><hr><h4 id="确定任务线程数" tabindex="-1">确定任务线程数 <a class="header-anchor" href="#确定任务线程数" aria-label="Permalink to &quot;确定任务线程数&quot;">​</a></h4><hr><ul><li><p>IO 密集型任务：</p><ul><li>由于 IO 密集型任务的CPU使用率较低，导致线程空余时间很多，因此通常需要开 CPU 核心数两倍的线程</li><li>Netty 的 IO 处理任务就是典型的 IO 密集型任务，所以，Netty 的 Reactor 实现类（定制版的线程池）的 IO 处理线程数默认正好为 CPU 核数的两倍</li></ul></li><li><p>CPU密集型任务：</p><ul><li>CPU 密集型的任务并行的任务越多，花在任务切换的时间就越多，CPU 执行任务的效率就越低，一般开等于 CPU 的核心数的线程数量</li><li>比如 4 个核心的 CPU，通过 4 个线程并行地执行 4 个 CPU 密集型任务，此时的效率是最高的。但是如果线程数远远超出 CPU 核心数量，就需要频繁地切换线程，线程上下文切换时需要消耗时间，反而会使得任务效率下降。</li></ul></li><li><p>混合型任务：</p><ul><li><p>业界有一个比较成熟的估算公式，具体如下：</p></li><li><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>最佳线程数 = ((线程等待时间 + 线程 CPU 时间) / 线程 CPU 时间) * CPU核数</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>通过公式可以看出：等待时间所占的比例越高，需要的线程就越多，CPU 耗时所占的比例越高，需要的线程就越少</p></li><li><p>比如在 Web 服务器处理 HTTP 请求时，假设平均线程 CPU 运行时间为 100 毫秒，而线程等待时间（比如包括 DB 操作、RPC 操作作、缓存操作等）为 900 毫秒，如果 CPU 核数为 8 那么根据上面这个公式，估算如下：<code>(900 毫秒+100 毫秒) / 100 毫秒 * 8 = 10 * 8 = 80</code>，最好开 80 个线程</p></li></ul></li></ul><hr><h2 id="关键源码剖析" tabindex="-1">关键源码剖析 <a class="header-anchor" href="#关键源码剖析" aria-label="Permalink to &quot;关键源码剖析&quot;">​</a></h2><hr><h3 id="属性-构造方法" tabindex="-1">属性 &amp; 构造方法 <a class="header-anchor" href="#属性-构造方法" aria-label="Permalink to &quot;属性 &amp; 构造方法&quot;">​</a></h3><hr><p>对于 ThreadPoolExecutor 有几个关键的属性，这里需要先大致了解：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ThreadPoolExecutor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractExecutorService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 控制变量-存放状态和线程数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AtomicInteger ctl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AtomicInteger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ctlOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RUNNING, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 任务队列，必须是阻塞队列</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BlockingQueue&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; workQueue;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 工作线程集合，存放线程池中所有的（活跃的）工作线程，只有在持有全局锁mainLock的前提下才能访问此集合</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HashSet&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; workers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HashSet&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 全局锁</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ReentrantLock mainLock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReentrantLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // awaitTermination方法使用的等待条件变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Condition termination </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mainLock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">newCondition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 线程工厂，用于创建新的线程实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> volatile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadFactory threadFactory;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 拒绝执行处理器，对应不同的拒绝策略</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> volatile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RejectedExecutionHandler handler;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 空闲线程等待任务的时间周期，单位是纳秒</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> volatile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keepAliveTime;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 是否允许核心线程超时，如果为true则keepAliveTime对核心线程也生效</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> volatile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allowCoreThreadTimeOut;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 核心线程数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> volatile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> corePoolSize;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 线程池容量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> volatile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maximumPoolSize;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>对于其构造方法如下：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ThreadPoolExecutor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> corePoolSize,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                          int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maximumPoolSize,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                          long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keepAliveTime,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                          TimeUnit unit,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                          BlockingQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Runnable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workQueue,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                          ThreadFactory threadFactory,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                          RejectedExecutionHandler handler) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (corePoolSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        maximumPoolSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        maximumPoolSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> corePoolSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        keepAliveTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IllegalArgumentException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (workQueue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> threadFactory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> handler </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NullPointerException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.corePoolSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> corePoolSize;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.maximumPoolSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maximumPoolSize;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.workQueue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workQueue;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.keepAliveTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> unit.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toNanos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(keepAliveTime);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.threadFactory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> threadFactory;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.handler </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> handler;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>由此可见，当我们手动创建线程池时，线程池并不会直接工作，而是将我们手动设置的关键参数进行初始化。</p><hr><h3 id="execute-方法" tabindex="-1">execute 方法 <a class="header-anchor" href="#execute-方法" aria-label="Permalink to &quot;execute 方法&quot;">​</a></h3><hr><p>ThreadPoolExecutor 的最基本使用方式就是通过 execute 方法提交一个 Runnable 任务，首先看图理解 execute 的执行逻辑</p><p><img src="https://lys2021.com/wp-content/uploads/2024/06/image-20240625174625992.png" alt="image-20240625174625992" loading="lazy"></p><p>查看源码中的 execute 方法，这里我们分层次来看，先看最主要的外部的几个条件判断：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Runnable command) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (command </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NullPointerException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * Proceed in 3 steps:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 1. If fewer than corePoolSize threads are running, try to</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * start a new thread with the given command as its first</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * task.  The call to addWorker atomically checks runState and</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * workerCount, and so prevents false alarms that would add</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * threads when it shouldn&#39;t, by returning false.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 2. If a task can be successfully queued, then we still need</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * to double-check whether we should have added a thread</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * (because existing ones died since last checking) or that</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * the pool shut down since entry into this method. So we</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * recheck state and if necessary roll back the enqueuing if</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * stopped, or start a new thread if there are none.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 3. If we cannot queue task, then we try to add a new</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * thread.  If it fails, we know we are shut down or saturated</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * and so reject the task.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	// 获取当前线程池里的线程数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">workerCountOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> corePoolSize) {  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 判断工作线程数，如果小于 corePollSize，则执行addWork</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(command, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    	//否则，如果线程池还在运行，offer 到等待队列中</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isRunning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workQueue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">offer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(command)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> recheck </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isRunning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(recheck) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(command))</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(command);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">workerCountOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(recheck) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                addWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 这里判断是否可以通过创建非核心线程的方式创建线程并执行</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(command, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(command);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 如果不能，则执行拒绝策略</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>其实源码里面的注释解释的已经很明白了，这里的逻辑其实已经说明了一些常见的问题：</p><ul><li>当提交任务时，只要核心线程数没有满，都会新建核心线程执行任务，不会使用以前创建好的空闲的核心线程去执行</li><li>当无法向队列提交任务时，如果可以新建非核心线程，则会新建非核心线程并执行任务，不会在创建之后从队列中取任务执行</li></ul><hr><h3 id="addworker-方法" tabindex="-1">addWorker 方法 <a class="header-anchor" href="#addworker-方法" aria-label="Permalink to &quot;addWorker 方法&quot;">​</a></h3><hr><p>接下来我们灌注一下 addWorker 方法：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 添加工作线程，如果返回false说明没有新创建工作线程，如果返回true说明创建和启动工作线程成功</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Runnable firstTask, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> core) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //第一步，计数判断，不符合条件打回false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    retry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();;) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 这个是十分复杂的条件，这里先拆分多个与（&amp;&amp;）条件：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1. 线程池状态至少为SHUTDOWN状态，也就是rs &gt;= SHUTDOWN(0)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2. 线程池状态至少为STOP状态，也就是rs &gt;= STOP(1)，或者传入的任务实例firstTask不为null，或者任务队列为空</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 其实这个判断的边界是线程池状态为shutdown状态下，不会再接受新的任务，在此前提下如果状态已经到了STOP、或者传入任务不为空、或者任务队列为空（已经没有积压任务）都不需要添加新的线程</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">runStateAtLeast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, SHUTDOWN)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">runStateAtLeast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, STOP)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firstTask </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workQueue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 注意这也是一个死循环 - 二层循环</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (;;) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 这里每一轮循环都会重新获取工作线程数wc</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 1. 如果传入的core为true，表示将要创建核心线程，通过wc和corePoolSize判断，如果wc &gt;= corePoolSize，则返回false表示创建核心线程失败</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 2. 如果传入的core为false，表示将要创非建核心线程，通过wc和maximumPoolSize判断，如果wc &gt;= maximumPoolSize，则返回false表示创建非核心线程失败</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">workerCountOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                &gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((core </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> corePoolSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maximumPoolSize) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COUNT_MASK))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 成功通过CAS更新工作线程数wc，则break到最外层的循环</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compareAndIncrementWorkerCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retry;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 走到这里说明了通过CAS更新工作线程数wc失败，这个时候需要重新判断线程池的状态是否由RUNNING已经变为SHUTDOWN</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Re-read ctl</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 如果线程池状态已经由RUNNING已经变为SHUTDOWN，则重新跳出到外层循环继续执行</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">runStateAtLeast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, SHUTDOWN))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retry;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 如果线程池状态依然是RUNNING，CAS更新工作线程数wc失败说明有可能是并发更新导致的失败，则在内层循环重试即可 </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // else CAS failed due to workerCount change; retry inner loop </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //第二步，创建新work放入线程集合works（一个HashSet）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 标记工作线程是否启动成功</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workerStarted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 标记工作线程是否创建成功</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workerAdded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Worker w </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 传入任务实例firstTask创建Worker实例，Worker构造里面会通过线程工厂创建新的Thread对象，所以下面可以直接操作Thread t = w.thread</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 这一步Worker实例已经创建，但是没有加入工作线程集合或者启动它持有的线程Thread实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        w </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(firstTask);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Thread t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w.thread;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 这里需要全局加锁，因为会改变一些指标值和非线程安全的集合</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ReentrantLock mainLock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.mainLock;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            mainLock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 这里主要在加锁的前提下判断ThreadFactory创建的线程是否存活或者判断获取锁成功之后线程池状态是否已经更变为SHUTDOWN</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 1. 如果线程池状态依然为RUNNING，则只需要判断线程实例是否存活，需要添加到工作线程集合和启动新的Worker</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 2. 如果线程池状态小于STOP，也就是RUNNING或者SHUTDOWN状态下，同时传入的任务实例firstTask为null，则需要添加到工作线程集合和启动新的Worker</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 对于2，换言之，如果线程池处于SHUTDOWN状态下，同时传入的任务实例firstTask不为null，则不会添加到工作线程集合和启动新的Worker</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 这一步其实有可能创建了新的Worker实例但是并不启动（临时对象，没有任何强引用），这种Worker有可能成功下一轮GC被收集的垃圾对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isRunning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">runStateLessThan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, STOP) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firstTask </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (t.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isAlive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// precheck that t is startable</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IllegalThreadStateException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // 把创建的工作线程实例添加到工作线程集合</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    workers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // 尝试更新历史峰值工作线程数，也就是线程池峰值容量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> largestPoolSize)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        largestPoolSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // 这里更新工作线程是否启动成功标识为true，后面才会调用Thread#start()方法启动真实的线程实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    workerAdded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                mainLock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 如果成功添加工作线程，则调用Worker内部的线程实例t的Thread#start()方法启动真实的线程实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (workerAdded) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                t.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 标记线程启动成功</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                workerStarted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 线程启动失败，需要从工作线程集合移除对应的Worker</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workerStarted)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            addWorkerFailed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workerStarted;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 添加Worker失败</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addWorkerFailed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Worker w) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ReentrantLock mainLock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.mainLock;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mainLock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 从工作线程集合移除之</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (w </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            workers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // wc数量减1    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        decrementWorkerCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 基于状态判断尝试终结线程池</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        tryTerminate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mainLock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br></div></div><p>先看看 addWork 的两个参数，第一个是需要提交的线程Runnable firstTask，第二个参数是 boolean 类型，表示是否为核心线程。</p><p>其中三处调用 addWork：</p><ul><li>第一次，条件if (workerCountOf(c) &lt; corePoolSize)：这个很好理解，工作线程数少于核心线程数，提交任务。所以addWorker(command, true)</li><li>第二次，如果 workerCountOf(recheck) == 0： 如果worker的数量为0，那就 addWorker(null,false)，由于之前已经把command提交到阻塞队列了workQueue.offer(command)。所以提交一个空线程，直接从阻塞队列里面取就可以了。</li><li>第三次，如果线程池没有RUNNING或者offer阻塞队列失败，addWorker(command,false)：说明阻塞队列满了，将任务提交到非核心线程池。</li></ul><hr><h3 id="worker-对象" tabindex="-1">Worker 对象 <a class="header-anchor" href="#worker-对象" aria-label="Permalink to &quot;Worker 对象&quot;">​</a></h3><hr><p>线程池中的每一个线程被封装成了内部的一个Worker对象，ThreadPool维护的其实就是一组Worker对象：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractQueuedSynchronizer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> serialVersionUID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6138294804551838833L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 保存ThreadFactory创建的线程实例，如果ThreadFactory创建线程失败则为null</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Thread thread;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 保存传入的Runnable任务实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Runnable firstTask;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 记录每个线程完成的任务总数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    volatile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> completedTasks;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 唯一的构造函数，传入任务实例firstTask，注意可以为null</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Runnable </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">firstTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 禁止线程中断，直到runWorker()方法执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// inhibit interrupts until runWorker</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.firstTask </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> firstTask;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 通过ThreadFactory创建线程实例，注意一下Worker实例自身作为Runnable用于创建新的线程实例</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.thread </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getThreadFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">newThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 委托到外部的runWorker()方法，注意runWorker()方法是线程池的方法，而不是Worker的方法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        runWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Lock methods</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The value 0 represents the unlocked state.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The value 1 represents the locked state.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //  是否持有独占锁，state值为1的时候表示持有锁，state值为0的时候表示已经释放锁</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isHeldExclusively</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 独占模式下尝试获取资源，这里没有判断传入的变量，直接CAS判断0更新为1是否成功，成功则设置独占线程为当前线程</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tryAcquire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> unused</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compareAndSetState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            setExclusiveOwnerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 独占模式下尝试是否资源，这里没有判断传入的变量，直接把state设置为0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tryRelease</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> unused</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setExclusiveOwnerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 加锁</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()        { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acquire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 尝试加锁</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tryLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()  { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tryAcquire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 解锁</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()      { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">release</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 是否锁定</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isLocked</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isHeldExclusively</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 启动后进行线程中断，注意这里会判断线程实例的中断标志位是否为false，只有中断标志位为false才会中断</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> interruptIfStarted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread t;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> thread) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isInterrupted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                t.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interrupt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (SecurityException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ignore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><hr><h3 id="runworker-方法" tabindex="-1">runWorker 方法 <a class="header-anchor" href="#runworker-方法" aria-label="Permalink to &quot;runWorker 方法&quot;">​</a></h3><hr><p>Worker 方法中的 run 方法实际调用的是线程池中的 runWorker 方法：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> runWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Worker w) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 获取当前线程，实际上和Worker持有的线程实例是相同的</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Thread wt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 获取Worker中持有的初始化时传入的任务对象，这里注意存放在临时变量task中</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Runnable task </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w.firstTask;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 设置Worker中持有的初始化时传入的任务对象为null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    w.firstTask </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 由于Worker初始化时AQS中state设置为-1，这里要先做一次解锁把state更新为0，允许线程中断</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    w.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// allow interrupts</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 记录线程是否因为用户异常终结，默认是true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> completedAbruptly </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1. 如果线程池外部传递了任务则直接执行外部传递的任务</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2. 如果没有获取到外部传递进来的任务则调用getTask()去队列中获取任务并执行</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.1. 如果在任务队列中获取到了任务则直接执行已经获取的任务</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.2. 如果任务队列为空，没有任务则反复执行空循环阻塞当前线程死亡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // getTask()由于使用了阻塞队列，这个while循环如果命中后半段会处于阻塞或者超时阻塞状态，getTask()返回为null会导致线程跳出死循环使线程终结</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (task </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (task </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Worker加锁，本质是AQS获取资源并且尝试CAS更新state由0更变为1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            w.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 如果线程池正在停止（也就是由RUNNING或者SHUTDOWN状态向STOP状态变更），那么要确保当前工作线程是中断状态</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 否则，要保证当前线程不是中断状态</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">runStateAtLeast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), STOP) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    (Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interrupted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                    runStateAtLeast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), STOP))) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isInterrupted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                wt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interrupt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 钩子方法，任务执行前</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                beforeExecute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(wt, task);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // 调用任务的run方法，而不是start()方法，因为Worker本身就是一个线程类</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    task.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // 钩子方法，任务执行后 - 正常情况</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                    afterExecute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(task, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Throwable </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // 钩子方法，任务执行后 - 异常情况</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                    afterExecute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(task, ex);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ex;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 清空task临时变量，这个很重要，否则while会死循环执行同一个task</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                task </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 执行完成后自增当前工作线程执行的任务数量</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                w.completedTasks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // Worker解锁，本质是AQS释放资源，设置state为0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                w.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 如果线程能够执行到最后一行代表线程执行过程中没有由于发生异常导致跳出循环，将 突然结束 标志改为false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        completedAbruptly </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 处理线程退出，completedAbruptly为true说明由于用户异常导致线程非正常退出</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 执行回收工作线程的逻辑</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        processWorkerExit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(w, completedAbruptly);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><p>runWorker 方法的本质其实就是通过一个 while 循环不断地通过 getTask() 方法获取任务，在调用方法执行的时候会先获取外部传递的任务，如果没有获取到外部传递的任务则调用 getTask() 方法获取任务队列中的任务并执行</p><hr><h3 id="gettask-方法" tabindex="-1">getTask 方法 <a class="header-anchor" href="#gettask-方法" aria-label="Permalink to &quot;getTask 方法&quot;">​</a></h3><hr><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Runnable </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // timeOut变量的值表示上次从阻塞队列中取任务时是否超时</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timedOut </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Did the last poll() time out?</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (;;) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> runStateOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Check if queue empty only if necessary.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 如果线程池状态rs &gt;= SHUTDOWN，也就是非RUNNING状态，再进行以下判断：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 1. rs &gt;= STOP，线程池是否正在stop；</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 2. 阻塞队列是否为空。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 如果以上条件满足，则将workerCount减1并返回null。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 因为如果当前线程池状态的值是SHUTDOWN或以上时，不允许再向阻塞队列中添加任务。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SHUTDOWN </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> STOP </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workQueue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            decrementWorkerCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> wc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> workerCountOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 判断是不是要超时处理</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // timed变量用于判断是否需要进行超时控制。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // allowCoreThreadTimeOut默认是false，也就是核心线程不允许进行超时；</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // wc &gt; corePoolSize，表示当前线程池中的线程数量大于核心线程数量；</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 对于超过核心线程数量的这些线程，需要进行超时控制</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allowCoreThreadTimeOut </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> wc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> corePoolSize;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 将线程队列数量原子性减</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * wc &gt; maximumPoolSize的情况是因为可能在此方法执行阶段同时执行了setMaximumPoolSize方法；</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * timed &amp;&amp; timedOut 如果为true，表示当前操作需要进行超时控制，并且上次从阻塞队列中获取任务发生了超时</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 接下来判断，如果有效线程数量大于1，或者阻塞队列是空的，那么尝试将workerCount减1；</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 如果减1失败，则返回重试。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 如果wc == 1时，也就说明当前线程是线程池中唯一的一个线程了。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((wc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maximumPoolSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (timed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timedOut))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //计数器做原子递减，递减成功后，返回null，for被中止</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (wc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workQueue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compareAndDecrementWorkerCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //递减失败，继续下一轮循环，直到成功</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //如果线程可被释放，那就poll，释放的时间为：keepAliveTime</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">			//否则，线程是不会被释放的，take一直被阻塞在这里，直到来了新任务继续工作</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Runnable r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                workQueue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(keepAliveTime, TimeUnit.NANOSECONDS) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                workQueue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">take</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 到这里说明可被释放的线程等待超时，已经销毁，设置该标记，下次循环将线程数减少</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            timedOut </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (InterruptedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">retry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 如果获取任务时当前线程发生了中断，则设置timedOut为false并返回循环重试</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            timedOut </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><p>综上所述，线程池内部将我们提交的任务封装成了一个个 Woker 对象来管理，我们调用线程池的 execute 方法，实际上：</p><ul><li>execute 根据策略调用 -&gt; addWoker 方法</li><li>addWoker 方法调用 Worker 的 run 方法</li><li>Worker 的 run 方法调用 runWorker 方法</li><li>runWorker 方法不断去用 getTask 获取任务执行</li></ul><hr><!--[--><h2 id="页面历史" data-v-35ca5596>页面历史 <a class="header-anchor" href="#页面历史" aria-label="Permalink to &#39;页面历史&#39;" data-v-35ca5596></a></h2><div class="bg-$vp-custom-block-details-bg vp-nolebase-git-changelog vp-nolebase-git-changelog-history vp-nolebase-git-changelog-history-list vp-nolebase-git-changelog-history-container" rounded-lg p-4 data-v-35ca5596><label cursor-pointer data-v-35ca5596><div class="vp-nolebase-git-changelog-title flex select-none items-center justify-between" transition="color ease-in-out" text="&lt;sm:xs" duration-200 data-v-35ca5596><span class="vp-nolebase-git-changelog-last-edited-title inline-flex items-center gap-3" data-v-35ca5596><div class="i-octicon:history-16" data-v-35ca5596></div><span data-v-35ca5596>最后编辑于 23 天前</span></span><div class="i-octicon:sort-desc-16" ml-auto mr-4 cursor-pointer data-v-35ca5596></div><span class="vp-nolebase-git-changelog-view-full-history-title inline-flex cursor-pointer items-center gap-3" data-v-35ca5596><span class="&lt;sm:hidden" data-v-35ca5596>查看完整历史</span><svg class="rotate-0 i-octicon:chevron-down-16" transition="transform ease-in-out" duration-200 data-v-35ca5596></svg></span></div></label><div style="display:none;" class="grid grid-cols-[30px_auto] mt-3 gap-1.5 children:my-auto -ml-1.5" text="&lt;sm:xs" data-v-35ca5596><!--[--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-c67214f5></div><div flex gap-1 align-baseline data-v-c67214f5><a href="https://github.com/DevBeginner-Doc/DevBeginner-Doc/commit/b38b1c832dfd8547be4c99bafffb0294f66ffb8f" target="_blank" class="no-icon" data-v-c67214f5><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-c67214f5>b38b1c8</code></a><span data-v-c67214f5>-</span><span data-v-c67214f5><span class="text-sm &lt;sm:text-xs" data-v-c67214f5>feat:添加Java线程池相关内容</span><!----><!----></span></div><!--]--><!--]--><!--]--></div></div><!--]--></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/DevBeginner-Doc/DevBeginner-Doc/edit/main/docs/Grammar-DataStructure/java/threadPoll.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>最后更新于: <time datetime="2024-08-15T01:33:03.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/Grammar-DataStructure/java/multithreading.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>上一页</span><span class="title" data-v-e257564d>多线程</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/Algorithm/introduction.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>下一页</span><span class="title" data-v-e257564d>引入</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><div class="footers" data-v-81065784><div class="container-block" style="margin-bottom:5px;" data-v-81065784><p style="font-weight:bold;font-size:13px;" data-v-81065784>Released under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" data-v-81065784> CC BY-NC-SA 4.0 License </a></p></div><div class="container-block" style="margin-bottom:5px;" data-v-81065784><p style="font-weight:bold;font-size:13px;" data-v-81065784>Copyright © 2024 DevBeginner-Doc</p></div><!----></div><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"algorithm_introduction.md\":\"BVEYj9NQ\",\"environment_c-cpp_bloodshed-devcpp.md\":\"gw0B3V9W\",\"environment_c-cpp_codeblocks.md\":\"CUMdzMjr\",\"environment_c-cpp_overview.md\":\"D9F_9iFZ\",\"environment_c-cpp_red-panda.md\":\"BB1X5Pk6\",\"environment_c-cpp_relationship.md\":\"BelWaUTO\",\"environment_c-cpp_sublime-text.md\":\"CZmgjj_3\",\"environment_c-cpp_vim-neovim.md\":\"Dy3BzrJe\",\"environment_c-cpp_visual-studio.md\":\"cHJTQJNh\",\"environment_c-cpp_vs-code.md\":\"jnSo4FEe\",\"environment_introduction.md\":\"CGMpsFm0\",\"environment_java_eclipse.md\":\"D2YmbRxR\",\"environment_java_idea.md\":\"tUyoXyTB\",\"environment_java_overview.md\":\"B_mHFges\",\"environment_java_sublime-text.md\":\"BuyiTEpQ\",\"environment_java_vim-neovim.md\":\"C4sSpwi6\",\"environment_java_vs-code.md\":\"Dv06Z4P8\",\"environment_pre-knowledges.md\":\"ByN9S-XN\",\"environment_python_cheat.md\":\"DW3L9IOw\",\"environment_python_overview.md\":\"C68aeKDP\",\"environment_python_py-idle.md\":\"BGLFEj68\",\"environment_python_pycharm.md\":\"CONvctcV\",\"environment_python_sublime-text.md\":\"CH5YUHAV\",\"environment_python_thonny.md\":\"Cb7-mTwc\",\"environment_python_vim-neovim.md\":\"BICn453p\",\"environment_python_vs-code.md\":\"VisqOEnd\",\"foreword_intention.md\":\"DKKokFEb\",\"foreword_prerequisites.md\":\"Bm7pe20V\",\"grammar-datastructure_c_array.md\":\"SUCUTuBd\",\"grammar-datastructure_c_control.md\":\"BP9IPRdm\",\"grammar-datastructure_c_data-type.md\":\"qY2cv0UW\",\"grammar-datastructure_c_function.md\":\"Cy5EXlR6\",\"grammar-datastructure_c_operator.md\":\"bBx8VwVq\",\"grammar-datastructure_c_overview.md\":\"DuuUe45L\",\"grammar-datastructure_c_pointer.md\":\"MBCpUIFf\",\"grammar-datastructure_c_struct.md\":\"pqZ1dfd2\",\"grammar-datastructure_cpp_array-str.md\":\"BO3lixkc\",\"grammar-datastructure_cpp_base.md\":\"tv13qSEF\",\"grammar-datastructure_cpp_function.md\":\"BXm2IcJk\",\"grammar-datastructure_cpp_in-out.md\":\"zV0rIxli\",\"grammar-datastructure_cpp_memory.md\":\"BlaqfD4B\",\"grammar-datastructure_cpp_overview.md\":\"BpSRqZLO\",\"grammar-datastructure_cpp_pointer.md\":\"CVs0Crh0\",\"grammar-datastructure_introduction.md\":\"Bld8kFpS\",\"grammar-datastructure_java_annotation.md\":\"O21SYIwS\",\"grammar-datastructure_java_array.md\":\"DyVwj4JV\",\"grammar-datastructure_java_classandobject.md\":\"DWnXLfej\",\"grammar-datastructure_java_keyword.md\":\"onAahuep\",\"grammar-datastructure_java_multithreading.md\":\"DBUiBehB\",\"grammar-datastructure_java_oop.md\":\"DDGHPmUE\",\"grammar-datastructure_java_overview.md\":\"Ojd3jGps\",\"grammar-datastructure_java_primer.md\":\"9AO1vmyZ\",\"grammar-datastructure_java_threadpoll.md\":\"CxHHkDVX\",\"grammar-datastructure_java_var-opt.md\":\"Cw13wdjX\",\"grammar-datastructure_python_overview.md\":\"CbN9INht\",\"index.md\":\"Fy5WCvOE\",\"linux_install.md\":\"D41YY66h\",\"linux_introduction.md\":\"JB83wr-u\",\"linux_package-mgr.md\":\"DXrRbJ3Z\",\"main.md\":\"kLRpps5E\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"VitePress\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/svg/Logo_Thick.svg\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/DevBeginner-Doc/DevBeginner-Doc\"},{\"icon\":{\"svg\":\"<svg t=\\\"1721642690748\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"20334\\\" width=\\\"24\\\" height=\\\"24\\\"><path d=\\\"M512.26 0h-0.51C229.12 0 0 229.12 0 511.74v0.51C0 794.88 229.12 1024 511.74 1024h0.51C794.88 1024 1024 794.88 1024 512.26v-0.51C1024 229.12 794.88 0 512.26 0zM794.7 731.23c-15.53 1.88-60.45-70.31-60.45-70.31 0 41.81-21.74 96.36-68.81 135.71 17.61 5.39 39.18 13.65 53.08 23.75 12.46 9.11 10.89 18.4 8.64 22.15-9.83 16.45-169.13 10.51-215.11 5.39-46.01 5.12-205.28 11.06-215.15-5.36-2.25-3.75-3.82-13.08 8.64-22.19 13.89-10.1 35.46-18.36 53.04-23.72-47.07-39.39-68.81-93.93-68.81-135.71 0 0-44.92 72.16-60.45 70.31-7.24-0.85-16.76-39.53 12.59-132.95 7.02-21.69 14.71-43.16 23.04-64.38l31.06-76.66c-0.04-0.89-0.41-15.97-0.41-23.79 0-131.07 62.57-262.83 216.41-262.83S728.42 302.39 728.42 433.5c0 7.78-0.41 22.87-0.41 23.76l31.06 76.66c8.35 21.21 16.03 42.68 23.04 64.38h-0.03c29.35 93.44 19.86 132.08 12.62 132.93z\\\" p-id=\\\"20335\\\"></path></svg>\"},\"link\":\"https://qm.qq.com/q/tY8pIKOT6w\"}],\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"displayDetails\":\"显示详细信息\",\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\",\"closeText\":\"关闭\"}}}}}}}},\"locales\":{\"root\":{\"label\":\"简体中文\",\"lang\":\"zh-Hans\",\"title\":\"DevBeginner Doc\",\"description\":\"面向编程初学者的帮助文档\",\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/main\"},{\"text\":\"Hello 算法\",\"link\":\"https://www.hello-algo.com/\"},{\"text\":\"Oi Wiki\",\"link\":\"https://oi-wiki.org/\"},{\"text\":\"ZZULI OJ\",\"link\":\"http://acm.zzuli.edu.cn/\"}],\"sidebar\":[{\"text\":\"<svg t=\\\"1718853865331\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"18955\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M511.3 191.8H94c-16.4 0-29.8 13.3-29.8 29.7l-0.8 644.3c0 16.5 13.3 29.8 29.8 29.8h306.1l8.3 16.3c5.1 10 15.3 16.3 26.6 16.3h156c10.9 0 20.9-6 26.2-15.5l9.3-17h304c16.4 0 29.8-13.3 29.8-29.8V221.6c0-16.4-13.3-29.8-29.8-29.8H511.3z\\\" fill=\\\"#7dc5eb\\\" p-id=\\\"18956\\\" data-spm-anchor-id=\\\"a313x.search_index.0.i18.7e613a81kxfIsN\\\" class=\\\"selected\\\"></path><path d=\\\"M517.8 189.4c-5.3 3.6-12.1 4.3-18 1.7-32.7-14.4-143.8-59.4-248.8-59.4H144.5c-10.2 0-18.5 8.3-18.5 18.5v666.6c0 10.2 8.3 18.5 18.5 18.5h328.3c5.4 0 10.5 2.3 14 6.4l8.8 10.1c7.3 8.4 20.3 8.5 27.7 0.3l9.8-10.7c3.5-3.9 8.5-6.1 13.7-6.1h328.8c10.2 0 18.5-8.3 18.5-18.5l0.9-666.6c0-10.3-8.3-18.6-18.5-18.6H764.2c0 0.1-155.6-4.1-246.4 57.8z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"18957\\\"></path><path d=\\\"M511 894.1l-31.3-36c-3.5-4.1-8.6-6.4-14-6.4H126.6c-10.2 0-18.5-8.3-18.5-18.5V126.6c0-10.2 8.3-18.5 18.5-18.5H253c100.6 0 204.6 39 247.2 56.9 5.6 2.3 11.9 1.8 17-1.3 94.5-58.4 239.7-55.8 249.4-55.6h132.1c10.3 0 18.6 8.3 18.5 18.6l-1 706.6c0 10.2-8.3 18.5-18.5 18.5h-340c-5.2 0-10.2 2.2-13.7 6.1l-33 36.2z m-363-82.4h336c5.4 0 10.5 2.3 14 6.4 7.3 8.4 20.3 8.5 27.7 0.3l0.6-0.6c3.5-3.9 8.5-6.1 13.7-6.1h336.2l0.9-663.7H765.7c-1.6 0-159.7-3.5-242.2 59.7l-0.7 0.5c-5.5 4.2-13 5-19.3 2l-0.8-0.4C501 209 371.5 148 252.9 148H148v663.7z\\\" fill=\\\"#8A8A8A\\\" p-id=\\\"18958\\\"></path><path d=\\\"M511.3 200.1v667.5\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"18959\\\"></path><path d=\\\"M491.3 200.1h40v667.5h-40z\\\" fill=\\\"#8A8A8A\\\" p-id=\\\"18960\\\"></path><path d=\\\"M576 291.6h256v40H576z m0 151.5h256v40H576z m0 168.4h256v40H576z m-385-320h256v40H191z m0 151.6h256v40H191z m0 168.4h256v40H191z\\\" fill=\\\"#CDCDCD\\\" p-id=\\\"18961\\\"></path></svg>序言\",\"collapsed\":false,\"items\":[{\"text\":\"编写初衷\",\"link\":\"/Foreword/intention\"},{\"text\":\"入门须知\",\"link\":\"/Foreword/prerequisites\"}]},{\"text\":\"<svg t=\\\"1718729628985\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"4789\\\" width=\\\"22\\\" height=\\\"22\\\"><path d=\\\"M204.8 860.842667h568.832\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"4790\\\"></path><path d=\\\"M136.533333 217.429333h705.365334a34.133333 34.133333 0 0 1 34.133333 34.133334v432.469333A22.698667 22.698667 0 0 1 853.333333 706.730667H125.098667A22.698667 22.698667 0 0 1 102.4 684.032V251.562667a34.133333 34.133333 0 0 1 34.133333-34.133334z\\\" fill=\\\"#FCFEFF\\\" p-id=\\\"4791\\\"></path><path d=\\\"M876.032 251.562667v432.298666A22.698667 22.698667 0 0 1 853.333333 706.730667H474.453333l178.176-489.301334h189.269334a34.133333 34.133333 0 0 1 34.133333 34.133334z\\\" fill=\\\"#EDF4FF\\\" p-id=\\\"4792\\\"></path><path d=\\\"M716.8 860.842667H261.632a57.002667 57.002667 0 0 1 57.002667-56.832h341.333333A56.832 56.832 0 0 1 716.8 860.842667z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"4793\\\"></path><path d=\\\"M598.528 706.730667h-218.453333l-27.306667 97.28h273.066667l-27.306667-97.28z\\\" fill=\\\"#C3CFDE\\\" p-id=\\\"4794\\\"></path><path d=\\\"M876.032 251.562667v68.266666H102.4v-68.266666a34.133333 34.133333 0 0 1 34.133333-34.133334h705.365334a34.133333 34.133333 0 0 1 34.133333 34.133334z\\\" fill=\\\"#96DDFF\\\" p-id=\\\"4795\\\"></path><path d=\\\"M841.898667 217.429333H652.629333l-37.205333 102.4h260.608v-68.266666a34.133333 34.133333 0 0 0-34.133333-34.133334z\\\" fill=\\\"#69BAF9\\\" p-id=\\\"4796\\\"></path><path d=\\\"M716.8 860.842667H261.632a57.002667 57.002667 0 0 1 57.002667-56.832h341.333333A56.832 56.832 0 0 1 716.8 860.842667z\\\" fill=\\\"#EDF4FF\\\" p-id=\\\"4797\\\"></path><path d=\\\"M782.165333 903.168a158.549333 158.549333 0 0 0 25.6-2.048 21.845333 21.845333 0 0 1 22.698667 10.581333 22.016 22.016 0 0 0 30.208 8.021334l36.010667-20.821334a22.186667 22.186667 0 0 0 7.850666-30.037333 22.186667 22.186667 0 0 1 2.048-25.088 160.256 160.256 0 0 0 25.6-44.544 22.016 22.016 0 0 1 21.162667-14.165333 22.186667 22.186667 0 0 0 22.186667-22.186667v-41.642667a22.186667 22.186667 0 0 0-22.186667-22.186666 22.016 22.016 0 0 1-20.650667-14.336 162.645333 162.645333 0 0 0-25.6-44.544 21.845333 21.845333 0 0 1-2.56-24.917334 22.357333 22.357333 0 0 0-8.192-30.378666l-36.010666-20.821334a22.016 22.016 0 0 0-30.208 8.192 22.016 22.016 0 0 1-22.698667 10.752 148.821333 148.821333 0 0 0-51.2 0 22.016 22.016 0 0 1-22.357333-10.752 22.186667 22.186667 0 0 0-30.208-8.192l-36.010667 20.821334a22.357333 22.357333 0 0 0-8.192 30.378666 21.845333 21.845333 0 0 1-2.048 24.917334A162.645333 162.645333 0 0 0 631.466667 684.714667a22.016 22.016 0 0 1-20.48 15.018666 22.186667 22.186667 0 0 0-22.186667 22.186667v40.96a22.186667 22.186667 0 0 0 22.186667 22.186667 22.016 22.016 0 0 1 20.650666 14.165333 160.256 160.256 0 0 0 25.6 44.544 22.186667 22.186667 0 0 1 2.048 25.088 22.186667 22.186667 0 0 0 8.192 30.208l36.010667 20.821333a22.016 22.016 0 0 0 30.378667-8.021333 21.845333 21.845333 0 0 1 22.698666-10.581333 158.549333 158.549333 0 0 0 25.6 1.877333z\\\" fill=\\\"#79DEB4\\\" p-id=\\\"4798\\\"></path><path d=\\\"M975.530667 721.066667v41.642666a22.186667 22.186667 0 0 1-22.186667 22.186667 22.186667 22.186667 0 0 0-20.650667 14.336 162.645333 162.645333 0 0 1-25.6 44.544 22.528 22.528 0 0 0-4.949333 13.994667 20.992 20.992 0 0 0 2.901333 10.922666 22.357333 22.357333 0 0 1-8.192 30.378667l-36.010666 20.821333a22.016 22.016 0 0 1-30.208-8.192 22.016 22.016 0 0 0-22.698667-10.752 148.821333 148.821333 0 0 1-51.2 0 22.016 22.016 0 0 0-22.698667 10.752 22.186667 22.186667 0 0 1-30.208 8.192l-36.010666-20.821333a22.357333 22.357333 0 0 1-8.192-30.378667 20.821333 20.821333 0 0 0 2.389333-6.144l240.64-241.152a21.674667 21.674667 0 0 0 4.437333 18.773334 162.645333 162.645333 0 0 1 25.6 44.544 22.186667 22.186667 0 0 0 20.650667 14.336 22.186667 22.186667 0 0 1 22.186667 22.016z\\\" fill=\\\"#62CCA1\\\" p-id=\\\"4799\\\"></path><path d=\\\"M782.165333 742.058667m-60.416 0a60.416 60.416 0 1 0 120.832 0 60.416 60.416 0 1 0-120.832 0Z\\\" fill=\\\"#FCFEFF\\\" p-id=\\\"4800\\\"></path><path d=\\\"M159.232 268.629333m-17.066667 0a17.066667 17.066667 0 1 0 34.133334 0 17.066667 17.066667 0 1 0-34.133334 0Z\\\" fill=\\\"#3D3D63\\\" p-id=\\\"4801\\\"></path><path d=\\\"M273.066667 268.629333m-17.066667 0a17.066667 17.066667 0 1 0 34.133333 0 17.066667 17.066667 0 1 0-34.133333 0Z\\\" fill=\\\"#3D3D63\\\" p-id=\\\"4802\\\"></path><path d=\\\"M216.234667 268.629333m-17.066667 0a17.066667 17.066667 0 1 0 34.133333 0 17.066667 17.066667 0 1 0-34.133333 0Z\\\" fill=\\\"#3D3D63\\\" p-id=\\\"4803\\\"></path><path d=\\\"M341.333333 516.266667l51.2-51.2a17.066667 17.066667 0 1 0-24.234666-24.234667l-63.488 63.658667a17.066667 17.066667 0 0 0 0 24.064l63.488 63.658666a17.066667 17.066667 0 0 0 24.234666 0 17.066667 17.066667 0 0 0 0-24.064zM585.728 591.872a17.066667 17.066667 0 0 0 24.064 0L673.450667 529.066667a17.066667 17.066667 0 0 0 0-24.064l-63.658667-63.658667a17.066667 17.066667 0 0 0-24.064 24.234667l51.2 51.2-51.2 51.2a17.066667 17.066667 0 0 0 0 23.893333zM529.066667 446.293333a17.066667 17.066667 0 0 0-23.381334 6.314667L442.709333 563.2a17.066667 17.066667 0 1 0 29.525334 17.066667l63.658666-110.08a17.066667 17.066667 0 0 0-6.826666-23.893334z\\\" fill=\\\"#3D3D63\\\" p-id=\\\"4804\\\"></path><path d=\\\"M953.344 682.666667a4.949333 4.949333 0 0 1-4.608-3.242667 178.005333 178.005333 0 0 0-28.501333-49.322667 4.949333 4.949333 0 0 1 0-5.632 39.253333 39.253333 0 0 0-14.336-53.589333l-12.8-7.68V251.562667a51.2 51.2 0 0 0-51.2-51.2H136.533333a51.2 51.2 0 0 0-51.2 51.2v432.469333a39.936 39.936 0 0 0 39.765334 39.765333H358.4l-17.066667 63.146667h-22.698666a73.898667 73.898667 0 0 0-71.850667 56.832H204.8a17.066667 17.066667 0 0 0 0 34.133333h434.688a36.181333 36.181333 0 0 0 1.194667 12.117334 38.4 38.4 0 0 0 18.261333 23.893333l36.010667 20.821333a39.253333 39.253333 0 0 0 53.589333-14.506666 5.290667 5.290667 0 0 1 5.290667-2.389334 166.229333 166.229333 0 0 0 56.661333 0 5.12 5.12 0 0 1 5.290667 2.56 39.253333 39.253333 0 0 0 34.133333 19.456 38.741333 38.741333 0 0 0 19.626667-5.12l36.010666-20.821333a39.082667 39.082667 0 0 0 18.261334-23.893333 38.570667 38.570667 0 0 0-3.925334-29.696 5.12 5.12 0 0 1 0-5.802667 179.541333 179.541333 0 0 0 28.501334-49.152 4.778667 4.778667 0 0 1 4.608-3.242667 39.424 39.424 0 0 0 39.253333-39.253333v-41.642667A39.253333 39.253333 0 0 0 953.344 682.666667zM119.466667 251.562667a17.066667 17.066667 0 0 1 17.066666-17.066667h705.365334a17.066667 17.066667 0 0 1 17.066666 17.066667v51.2H119.466667z m5.632 438.101333a5.632 5.632 0 0 1-5.632-5.632V336.896h739.498666V546.133333a39.082667 39.082667 0 0 0-43.178666 17.066667 4.949333 4.949333 0 0 1-5.12 2.218667 175.274667 175.274667 0 0 0-56.661334 0 4.778667 4.778667 0 0 1-5.12-2.218667 39.082667 39.082667 0 0 0-53.589333-14.336l-36.010667 20.821333a38.229333 38.229333 0 0 0-18.261333 23.722667 39.594667 39.594667 0 0 0 3.754667 29.866667 4.608 4.608 0 0 1 0 5.632 178.005333 178.005333 0 0 0-28.501334 49.322666 4.949333 4.949333 0 0 1-4.608 3.242667 39.082667 39.082667 0 0 0-23.210666 7.68zM580.266667 786.944H375.466667l17.066666-63.146667h179.2v39.082667a39.594667 39.594667 0 0 0 8.533334 24.064z m-261.461334 34.133333h303.786667a187.733333 187.733333 0 0 0 13.312 22.698667H282.794667a39.765333 39.765333 0 0 1 35.84-22.698667z m639.658667-58.197333a5.12 5.12 0 0 1-5.12 5.12 39.424 39.424 0 0 0-36.693333 25.258667 144.384 144.384 0 0 1-22.869334 39.765333 39.424 39.424 0 0 0-3.584 44.373333 4.437333 4.437333 0 0 1 0 3.754667 4.949333 4.949333 0 0 1-2.389333 3.242667L852.309333 904.533333a5.12 5.12 0 0 1-6.997333-2.048 39.424 39.424 0 0 0-40.448-18.944 135.168 135.168 0 0 1-45.397333 0 39.424 39.424 0 0 0-40.448 19.114667 5.290667 5.290667 0 0 1-6.997334 1.877333l-36.010666-20.821333a4.949333 4.949333 0 0 1-2.389334-3.242667 4.437333 4.437333 0 0 1 0-3.754666 39.765333 39.765333 0 0 0-3.584-44.373334 142.506667 142.506667 0 0 1-23.04-39.765333A38.912 38.912 0 0 0 610.986667 768a5.12 5.12 0 0 1-5.12-5.12v-41.642667a4.949333 4.949333 0 0 1 5.12-5.12 39.253333 39.253333 0 0 0 36.522666-25.258666 140.117333 140.117333 0 0 1 23.04-39.765334 39.765333 39.765333 0 0 0 3.584-44.373333 4.778667 4.778667 0 0 1 0-3.925333 4.437333 4.437333 0 0 1 2.389334-3.072l36.010666-20.821334a4.778667 4.778667 0 0 1 2.56 0 5.12 5.12 0 0 1 4.266667 2.389334 39.594667 39.594667 0 0 0 40.448 19.114666 135.168 135.168 0 0 1 45.397333 0A39.765333 39.765333 0 0 0 845.312 580.266667a4.949333 4.949333 0 0 1 6.826667-1.706667l36.010666 20.821333a4.437333 4.437333 0 0 1 2.389334 3.072 4.778667 4.778667 0 0 1 0 3.925334 39.253333 39.253333 0 0 0 3.584 44.202666 145.237333 145.237333 0 0 1 22.869333 39.936A39.594667 39.594667 0 0 0 953.344 716.8a4.949333 4.949333 0 0 1 5.12 5.12z\\\" fill=\\\"#3D3D63\\\" p-id=\\\"4805\\\"></path><path d=\\\"M782.165333 664.576a77.482667 77.482667 0 1 0 77.482667 77.482667 77.482667 77.482667 0 0 0-77.482667-77.482667z m0 120.832a43.349333 43.349333 0 1 1 43.349334-43.349333A43.349333 43.349333 0 0 1 782.165333 785.066667z\\\" fill=\\\"#3D3D63\\\" p-id=\\\"4806\\\"></path></svg>环境搭建\",\"collapsed\":false,\"items\":[{\"text\":\"引入\",\"link\":\"/Environment/introduction\"},{\"text\":\"准备\",\"link\":\"/Environment/pre-knowledges\"},{\"text\":\"C/C++\",\"collapsed\":true,\"items\":[{\"text\":\"概述\",\"link\":\"/Environment/c-cpp/overview\"},{\"text\":\"Dev C++\",\"link\":\"/Environment/c-cpp/bloodshed-devcpp\"},{\"text\":\"小熊猫Dev C++\",\"link\":\"/Environment/c-cpp/red-panda\"},{\"text\":\"CodeBlocks\",\"link\":\"/Environment/c-cpp/codeblocks\"},{\"text\":\"Visual Studio\",\"link\":\"/Environment/c-cpp/visual-studio\"},{\"text\":\"Visual Studio Code\",\"link\":\"/Environment/c-cpp/vs-code\"},{\"text\":\"Sublime Text\",\"link\":\"/Environment/c-cpp/sublime-text\"},{\"text\":\"Vim/Neovim\",\"link\":\"/Environment/c-cpp/vim-neovim\"}]},{\"text\":\"Java\",\"collapsed\":true,\"items\":[{\"text\":\"概述\",\"link\":\"/Environment/java/overview\"},{\"text\":\"Eclipse\",\"link\":\"/Environment/java/eclipse\"},{\"text\":\"IntelliJ IDEA\",\"link\":\"/Environment/java/idea\"},{\"text\":\"Visual Studio Code\",\"link\":\"/Environment/java/vs-code\"},{\"text\":\"Sublime Text\",\"link\":\"/Environment/java/sublime-text\"},{\"text\":\"Vim/Neovim\",\"link\":\"/Environment/java/vim-neovim\"}]},{\"text\":\"Python\",\"collapsed\":true,\"items\":[{\"text\":\"概述\",\"link\":\"/Environment/python/overview\"},{\"text\":\"Thonny\",\"link\":\"/Environment/python/thonny\"},{\"text\":\"PyCharm\",\"link\":\"/Environment/python/pycharm\"},{\"text\":\"Python IDLE\",\"link\":\"/Environment/python/py-idle\"},{\"text\":\"Visual Studio Code\",\"link\":\"/Environment/python/vs-code\"},{\"text\":\"Sublime Text\",\"link\":\"/Environment/python/sublime-text\"},{\"text\":\"Vim/Neovim\",\"link\":\"/Environment/python/vim-neovim\"}]}]},{\"text\":\"<svg t=\\\"1718730049852\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1126 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"26150\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M396.117333 978.9952L547.157333 47.616l85.333334-38.263467-151.04 931.362134-85.333334 38.263466z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26151\\\"></path><path d=\\\"M547.157333 47.616l95.232 32.938667 85.333334-38.263467L632.490667 9.386667l-85.333334 38.263466z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26152\\\"></path><path d=\\\"M642.389333 80.554667l-151.057066 931.362133 85.333333-38.263467 151.04-931.362133-85.333333 38.263467z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26153\\\"></path><path d=\\\"M491.332267 1011.9168l-95.232-32.938667 85.333333-38.229333 95.232 32.904533-85.333333 38.263467zM396.117333 978.9952l85.333334-38.263467-85.333334 38.263467zM136.789333 472.439467L376.046933 241.834667l85.333334-38.263467-239.2576 230.621867-85.333334 38.2464zM376.046933 241.834667l-68.4032-86.3232 85.333334-38.263467 68.4032 86.3232-85.333334 38.263467z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26154\\\"></path><path d=\\\"M307.643733 155.511467L0 452.010667l85.333333-38.263467L392.977067 117.248l-85.333334 38.263467z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26155\\\"></path><path d=\\\"M0 452.010667l307.643733 388.437333 85.333334-38.263467L85.333333 413.7472l-85.333333 38.263467z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26156\\\"></path><path d=\\\"M307.643733 840.448l68.4032-65.877333 85.333334-38.263467-68.4032 65.877333-85.333334 38.263467zM376.046933 774.5536L136.789333 472.439467l85.333334-38.2464 239.2576 302.114133-85.333334 38.2464zM136.789333 472.439467l85.333334-38.2464-85.333334 38.2464zM726.954667 218.1632l307.6608 388.437333 85.333333-38.2464-307.6608-388.437333-85.333333 38.2464z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26157\\\"></path><path d=\\\"M1034.615467 606.600533L726.954667 903.099733l85.333333-38.2464 307.6608-296.4992-85.333333 38.2464z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26158\\\"></path><path d=\\\"M726.954667 903.099733l-68.386134-86.3232 85.333334-38.2464 68.386133 86.3232-85.333333 38.2464zM658.568533 816.776533l239.2576-230.6048 85.333334-38.263466-239.274667 230.621866-85.333333 38.2464z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26159\\\"></path><path d=\\\"M897.826133 586.171733l-239.274666-302.1312 85.333333-38.2464 239.274667 302.114134-85.333334 38.263466z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26160\\\"></path><path d=\\\"M658.568533 284.040533l68.386134-65.877333 85.333333-38.2464-68.386133 65.877333-85.333334 38.2464zM726.954667 218.1632l85.333333-38.2464-85.333333 38.2464z\\\" fill=\\\"#CECEF9\\\" p-id=\\\"26161\\\"></path><path d=\\\"M396.117333 978.9952L547.157333 47.616l95.232 32.9216-151.057066 931.362133-95.232-32.938666zM136.772267 472.456533L376.046933 241.834667l-68.4032-86.3232L0 452.010667l307.643733 388.437333 68.4032-65.877333L136.789333 472.4224z m590.165333-254.293333l307.6608 388.437333-307.6608 296.4992-68.386133-86.3232 239.2576-230.6048-239.274667-302.1312 68.4032-65.877333z\\\" fill=\\\"#4E5969\\\" p-id=\\\"26162\\\"></path></svg>语法基础&基础数据结构\",\"collapsed\":false,\"items\":[{\"text\":\"引入\",\"link\":\"/Grammar-DataStructure/introduction\"},{\"text\":\"C语言\",\"collapsed\":true,\"items\":[{\"text\":\"概述\",\"link\":\"/Grammar-DataStructure/c/overview\"},{\"text\":\"数据类型\",\"link\":\"/Grammar-DataStructure/c/data-type\"},{\"text\":\"运算符\",\"link\":\"/Grammar-DataStructure/c/operator\"},{\"text\":\"流程控制\",\"link\":\"/Grammar-DataStructure/c/control\"},{\"text\":\"函数\",\"link\":\"/Grammar-DataStructure/c/function\"},{\"text\":\"数组\",\"link\":\"/Grammar-DataStructure/c/array\"},{\"text\":\"指针\",\"link\":\"/Grammar-DataStructure/c/pointer\"},{\"text\":\"结构体和链表\",\"link\":\"/Grammar-DataStructure/c/struct\"}]},{\"text\":\"C++\",\"collapsed\":true,\"items\":[{\"text\":\"概述\",\"link\":\"/Grammar-DataStructure/cpp/overview\"},{\"text\":\"基础语法\",\"link\":\"/Grammar-DataStructure/cpp/base\"},{\"text\":\"输入输出\",\"link\":\"/Grammar-DataStructure/cpp/in-out\"},{\"text\":\"函数\",\"link\":\"/Grammar-DataStructure/cpp/function\"},{\"text\":\"数组与字符串\",\"link\":\"/Grammar-DataStructure/cpp/array-str\"},{\"text\":\"指针与引用\",\"link\":\"/Grammar-DataStructure/cpp/pointer\"},{\"text\":\"内存管理\",\"link\":\"/Grammar-DataStructure/cpp/memory\"}]},{\"text\":\"Python\",\"collapsed\":true,\"items\":[{\"text\":\"概述\",\"link\":\"/Grammar-DataStructure/python/overview\"}]},{\"text\":\"Java\",\"collapsed\":true,\"items\":[{\"text\":\"概述\",\"link\":\"/Grammar-DataStructure/java/overview\"},{\"text\":\"初步体验\",\"link\":\"/Grammar-DataStructure/java/primer\"},{\"text\":\"注释\",\"link\":\"/Grammar-DataStructure/java/annotation\"},{\"text\":\"变量与运算符\",\"link\":\"/Grammar-DataStructure/java/var-opt\"},{\"text\":\"数组\",\"link\":\"/Grammar-DataStructure/java/array\"},{\"text\":\"面向对象\",\"collapsed\":true,\"items\":[{\"text\":\"概述&面向对象三特性\",\"link\":\"/Grammar-DataStructure/java/OOP\"},{\"text\":\"类与对象\",\"link\":\"/Grammar-DataStructure/java/ClassAndObject\"},{\"text\":\"关键字\",\"link\":\"/Grammar-DataStructure/java/keyword\"}]},{\"text\":\"多线程\",\"link\":\"/Grammar-DataStructure/java/multithreading\"},{\"text\":\"线程池\",\"link\":\"/Grammar-DataStructure/java/threadPoll\"}]}]},{\"text\":\"<svg t=\\\"1718733243585\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1077 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"104076\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M790.45614 736.561404m-287.438596 0a287.438596 287.438596 0 1 0 574.877193 0 287.438596 287.438596 0 1 0-574.877193 0Z\\\" fill=\\\"#8CB4FE\\\" p-id=\\\"104077\\\"></path><path d=\\\"M910.291088 358.040702c-97.324912-27.773754-229.286175-48.559158-368.280702-41.624702h-41.705544c48.631018-69.398456 97.31593-131.862456 145.92-180.412632 76.458667-69.416421 111.202807-76.350877 125.089684-69.416421 13.886877 6.952421 27.800702 69.389474-6.952421 187.365053l69.470316 20.812351c41.768421-138.760982 34.78007-235.897263-20.839298-263.662035-34.717193-20.839298-97.262035-20.839298-208.437895 76.350877-69.479298 55.475649-132.02414 138.752-194.56 228.989754-27.800702 6.916491-48.666947 6.916491-76.458667 13.850948-48.64-138.778947-48.64-222.028351-27.773754-235.942176 13.886877-6.925474 69.479298 6.925474 159.81586 97.163228l48.631017-48.586105C409.986246 31.914667 326.575158-2.775579 271.018667 31.914667c-69.524211 34.699228-55.619368 159.600281-6.961404 305.313684-34.771088 6.916491-62.53586 13.877895-90.336561 20.839298C27.791719 399.683368 0 455.168 0 496.846596c0 62.437053 76.458667 117.939649 215.399298 152.638878l13.886877-69.362527C118.110316 552.358175 69.470316 517.658947 69.470316 503.745123c0-13.850947 27.827649-41.624702 125.089684-76.288 27.791719-6.988351 62.544842-13.913825 97.324912-20.812351 6.925474 20.812351 20.812351 48.523228 34.690246 76.288-41.678596 83.303298-76.395789 166.552702-90.309614 242.903579-34.78007 145.713404 0 201.216 34.726175 222.055298 13.904842 6.934456 27.818667 13.886877 41.705544 13.886877 48.631018 0 118.128281-41.624702 194.56-118.002526l-48.631017-48.550175C375.215158 885.427649 319.649684 899.323509 305.762807 892.362105c-13.904842-6.934456-27.791719-41.624702 0-145.713403 6.934456-62.464 27.773754-124.928 55.565474-194.317474 6.952421 13.877895 13.886877 20.812351 20.866245 34.717193C451.691789 705.032982 528.096561 809.085754 604.546246 878.484211c76.458667 69.416421 125.089684 90.228772 166.76828 90.228771 20.839298 0 34.753123-6.925474 41.678597-13.877894 55.592421-34.699228 62.544842-124.901053 20.839298-256.763509-20.839298-69.389474-55.529544-152.665825-97.235088-229.007719l-55.592421 34.690245c41.678596 76.377825 69.470316 152.665825 90.309614 215.129825 34.753123 117.975579 20.839298 173.487158 6.961404 180.439579-13.913825 6.925474-48.64 0-125.089684-69.389474-69.470316-62.464-145.928982-166.579649-208.446878-277.593824-20.839298-27.773754-34.78007-48.586105-41.705543-76.32393 6.952421-20.812351 20.866246-41.624702 34.753122-62.464 6.952421-6.925474 13.904842-20.812351 13.904842-27.737825h90.318597c132.015158 0 257.104842 13.877895 347.441403 41.624702 97.297965 27.764772 125.089684 62.464 125.089685 76.314947 0 20.839298-41.705544 55.538526-166.795228 83.303299l13.913824 69.371508c145.928982-34.699228 215.399298-90.210807 215.399298-152.674807 6.952421-48.577123-27.773754-104.061754-166.76828-145.713403z m-548.962807 41.651649c0-6.961404 0-6.961404 6.952421-6.961404l-6.952421 6.961404z m111.202807 97.127298c0 55.538526 41.678596 97.163228 97.271017 97.163228 55.592421 0 97.297965-41.651649 97.297965-97.163228 0-55.538526-41.705544-104.061754-97.324912-104.061754-55.565474 0-97.24407 48.523228-97.24407 104.061754z m125.089684 0c0 13.886877-13.904842 27.764772-27.818667 27.764772-13.886877 0-27.791719-13.877895-27.791719-27.755789 0-13.89586 13.904842-27.773754 27.755789-27.773755 13.949754 0 27.827649 6.952421 27.82765 27.764772h0.026947z\\\" fill=\\\"#8a8a8a\\\" p-id=\\\"104078\\\" data-spm-anchor-id=\\\"a313x.search_index.0.i65.7e613a819ggm2r\\\" class=\\\"selected\\\"></path></svg>算法基础\",\"collapsed\":false,\"items\":[{\"text\":\"引入\",\"link\":\"/Algorithm/introduction\"},{\"text\":\"Hello Algo\"},{\"text\":\"Oi Wiki\"}]},{\"text\":\"<svg t=\\\"1718730903981\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"86643\\\" width=\\\"22\\\" height=\\\"22\\\"><path d=\\\"M557.597 148.521a54.603 54.603 0 0 0-20.9 25.886 63.578 63.578 0 0 0 1.67 41.757 69.25 69.25 0 0 0 24.667 35.198 45.12 45.12 0 0 0 20.162 7.808 36.75 36.75 0 0 0 21.18-3.681 40.876 40.876 0 0 0 17.571-19.2 70.837 70.837 0 0 0 5.791-25.793 87.129 87.129 0 0 0-4.188-33.401 56.092 56.092 0 0 0-21.636-28.8 42.254 42.254 0 0 0-17.085-6.399 36.448 36.448 0 0 0-18.109 2.017 45.305 45.305 0 0 0-9.185 5.023\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"86644\\\"></path><path d=\\\"M873.57 600.998a468.41 468.41 0 0 0-26.336-91.578 262.727 262.727 0 0 0-32.7-61.883c-13.762-18.303-31.103-33.724-44.578-52.252-7.102-9.6-13.117-20.352-20.51-29.854a846.445 846.445 0 0 1-8.801-18.62c-8.888-19.358-16.962-39.198-27.52-57.598a185.116 185.116 0 0 0-5.15-8.54c-1.341-17.725-3.2-35.424-4.162-53.18a500.337 500.337 0 0 0-8.924-106.235 172.941 172.941 0 0 0-21.119-47.42 162.686 162.686 0 0 0-41.276-44.48A159.313 159.313 0 0 0 541.106 0.083a142.96 142.96 0 0 0-69.276 16 124.749 124.749 0 0 0-52.058 54.203 179.51 179.51 0 0 0-16.573 73.786c-0.834 24.959 1.475 49.918 2.402 74.908 0.962 25.947 0.445 51.996 2.59 77.882 0.702 8.35 1.664 16.67 1.628 25.056 0 4.162-0.256 8.381-0.322 12.544l-0.323 0.896a531.895 531.895 0 0 1-37.436 55.257 2415.978 2415.978 0 0 1-28.799 35.936 217.263 217.263 0 0 0-31.578 46.56 332.52 332.52 0 0 0-13.757 45.049l-0.354 1.28a350.055 350.055 0 0 1-19.936 51.197c-0.737 1.542-1.505 3.2-2.243 4.608a905.486 905.486 0 0 1-14.975 29.403l-5.985 11.233a182.275 182.275 0 0 0-10.014 20.858 69.028 69.028 0 0 0-3.712 13.28 70.197 70.197 0 0 0 1.792 28.8c0.61 2.365 1.31 4.669 2.114 6.973a151.08 151.08 0 0 0 8.704 20.095c1.536 2.975 3.2 5.918 4.766 8.832l1.44 2.109a293.4 293.4 0 0 0 4.924 8.227l0.195 0.323a237.07 237.07 0 0 0 6.016 9.052l0.291 0.42a645.015 645.015 0 0 0 6.4 8.729 231.507 231.507 0 0 0 43.964 87.579c-3.2 5.601-6.113 11.264-9.344 16.793a254.116 254.116 0 0 0-27.77 52.544 63.168 63.168 0 0 0-2.114 29.44 42.238 42.238 0 0 0 14.525 25.306 44.005 44.005 0 0 0 17.566 8.125 78.313 78.313 0 0 0 19.389 1.7 315.645 315.645 0 0 0 72.537-14.305 808.215 808.215 0 0 1 42.776-9.983 254.914 254.914 0 0 1 45.468-6.205c3.774 0 7.552 0 11.295-0.384a211.23 211.23 0 0 0 31.323 1.152l3.84-0.22c2.718 0.322 5.442 0.48 8.16 0.64 18.37 1.049 36.735 2.846 54.91 5.6a534.09 534.09 0 0 1 47.65 9.406 363.904 363.904 0 0 0 74.55 14.304 80.975 80.975 0 0 0 19.91-1.572 44.194 44.194 0 0 0 18.037-8.253 42.295 42.295 0 0 0 14.56-25.343 62.973 62.973 0 0 0-2.17-29.5 244.552 244.552 0 0 0-28.287-52.375c-4.03-6.79-7.777-13.732-11.775-20.48a363.131 363.131 0 0 0 45.085-62.614 61.463 61.463 0 0 0 22.783-2.883 95.515 95.515 0 0 0 47.993-35.997 54.853 54.853 0 0 0 8.032-16.42 108.765 108.765 0 0 0 15.355-39.1 195.581 195.581 0 0 0-1.705-69.536z\\\" fill=\\\"#020204\\\" p-id=\\\"86645\\\"></path><path d=\\\"M447.204 287.006a39.683 39.683 0 0 0-7.137 15.068 79.874 79.874 0 0 0-2.079 16.64 147.173 147.173 0 0 1-2.785 33.34 102.565 102.565 0 0 1-17.248 31.327 190.077 190.077 0 0 0-30.176 54.137 96.047 96.047 0 0 0-3.487 37.313 394.859 394.859 0 0 0-34.748 62.81 343.359 343.359 0 0 0-28.256 104.694 267.263 267.263 0 0 0 18.815 130.616 214.007 214.007 0 0 0 55.74 77.657 190.733 190.733 0 0 0 40.732 27.038 182.582 182.582 0 0 0 163.603-1.603 318.082 318.082 0 0 0 69.435-54.879 241.854 241.854 0 0 0 35.198-40 224.452 224.452 0 0 0 29.403-97.656 318.558 318.558 0 0 0-18.78-176.525 194.844 194.844 0 0 0-35.198-50.589 277.221 277.221 0 0 0-22.399-75.322c-7.935-17.213-17.602-33.627-24.959-51.198-3.01-7.167-5.632-14.525-8.99-21.534a64.576 64.576 0 0 0-13.122-19.199 54.065 54.065 0 0 0-20.51-11.903 89.279 89.279 0 0 0-23.49-4.035c-15.999-0.798-31.998 1.28-47.803 0.64-12.8-0.512-25.307-2.718-37.979-1.981a58.545 58.545 0 0 0-18.559 3.901 37.39 37.39 0 0 0-15.262 11.038m5.16-138.28a25.87 25.87 0 0 0-15.999 7.137 36.1 36.1 0 0 0-9.307 15.042 91.06 91.06 0 0 0-2.079 35.454 104.579 104.579 0 0 0 5.601 31.743 41.44 41.44 0 0 0 8.606 13.568 29.623 29.623 0 0 0 13.757 8.125 27.826 27.826 0 0 0 14.976-0.543 32.47 32.47 0 0 0 12.8-7.808 43.134 43.134 0 0 0 10.879-19.004 75.358 75.358 0 0 0 2.529-21.918 91.388 91.388 0 0 0-4.224-27.263 61.386 61.386 0 0 0-13.951-23.679 39.51 39.51 0 0 0-10.685-8.002 26.331 26.331 0 0 0-12.959-2.847m105.33-0.005a54.603 54.603 0 0 0-20.9 25.886 63.578 63.578 0 0 0 1.67 41.757 69.25 69.25 0 0 0 24.667 35.198 45.12 45.12 0 0 0 20.162 7.808 36.75 36.75 0 0 0 21.18-3.681 40.876 40.876 0 0 0 17.571-19.2 70.837 70.837 0 0 0 5.791-25.793 87.129 87.129 0 0 0-4.188-33.401 56.092 56.092 0 0 0-21.636-28.8 42.254 42.254 0 0 0-17.085-6.399 36.448 36.448 0 0 0-18.109 2.017 45.305 45.305 0 0 0-9.185 5.023\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"86646\\\"></path><path d=\\\"M579.039 176.552a21.513 21.513 0 0 0-9.861 3.2 25.927 25.927 0 0 0-7.485 7.295 37.656 37.656 0 0 0-5.985 19.84 41.895 41.895 0 0 0 2.109 15.518 29.336 29.336 0 0 0 8.74 12.8 25.24 25.24 0 0 0 14.78 5.759 24.76 24.76 0 0 0 15.232-4.352 27.314 27.314 0 0 0 8.386-9.6 35.674 35.674 0 0 0 3.809-12.226 37.712 37.712 0 0 0-3.584-22.076 30.908 30.908 0 0 0-16.45-14.878 23.254 23.254 0 0 0-9.6-1.505\\\" fill=\\\"#020204\\\" p-id=\\\"86647\\\"></path><path d=\\\"M452.324 148.521a25.87 25.87 0 0 0-16 7.137 36.1 36.1 0 0 0-9.307 15.042 91.06 91.06 0 0 0-2.079 35.454 104.579 104.579 0 0 0 5.601 31.743 41.44 41.44 0 0 0 8.606 13.568 29.623 29.623 0 0 0 13.757 8.125 27.826 27.826 0 0 0 14.976-0.543 32.47 32.47 0 0 0 12.8-7.808 43.134 43.134 0 0 0 10.879-19.004 75.358 75.358 0 0 0 2.529-21.918 91.388 91.388 0 0 0-4.224-27.263 61.386 61.386 0 0 0-13.951-23.679 39.51 39.51 0 0 0-10.685-8.002 26.331 26.331 0 0 0-12.959-2.847\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"86648\\\"></path><path d=\\\"M437.958 197.794a44.926 44.926 0 0 0 1.28 22.399 37.618 37.618 0 0 0 7.935 12.8 26.235 26.235 0 0 0 7.746 6.015 14.387 14.387 0 0 0 9.6 1.214 14.156 14.156 0 0 0 7.424-4.992 24.44 24.44 0 0 0 4.065-8.095 44.998 44.998 0 0 0-0.42-26.459 34.472 34.472 0 0 0-10.112-16.444 20.018 20.018 0 0 0-8.191-4.286 14.284 14.284 0 0 0-9.282 0.738 15.75 15.75 0 0 0-7.168 7.234 32.94 32.94 0 0 0-2.975 9.886\\\" fill=\\\"#020204\\\" p-id=\\\"86649\\\"></path><path d=\\\"M423.975 291.066a9.109 9.109 0 0 0 1.086 2.816 12.764 12.764 0 0 0 3.742 3.773c1.408 1.024 2.914 1.854 4.383 2.786a79.234 79.234 0 0 1 19.808 19.199 124.35 124.35 0 0 0 24.38 27.677 51.403 51.403 0 0 0 24.381 8.735 79.782 79.782 0 0 0 30.335-3.523 107.167 107.167 0 0 0 26.014-11.422 271.81 271.81 0 0 1 45.146-29.597c3.712-1.342 7.552-2.335 11.105-3.999a17.484 17.484 0 0 0 8.637-7.741 37.2 37.2 0 0 0 2.114-11.105c0.574-3.999 1.854-7.9 2.56-11.868a19.977 19.977 0 0 0-0.926-11.939 15.431 15.431 0 0 0-7.01-6.973 23.981 23.981 0 0 0-9.599-2.401 143.098 143.098 0 0 0-19.998 1.986c-8.857 0.799-17.76-0.322-26.654 0-11.033 0.323-21.948 2.816-32.986 3.2-12.605 0.61-25.18-1.346-37.79-1.858a78.03 78.03 0 0 0-16.352 0.768 37.774 37.774 0 0 0-15.165 5.857 145.356 145.356 0 0 0-11.903 10.623 30.299 30.299 0 0 1-6.559 4.51 16.947 16.947 0 0 1-7.71 1.823 12.492 12.492 0 0 0-4.096 0 5.54 5.54 0 0 0-2.14 1.342 12.441 12.441 0 0 0-1.603 2.017 35.158 35.158 0 0 0-2.913 5.217\\\" fill=\\\"#D99A03\\\" p-id=\\\"86650\\\"></path><path d=\\\"M451.75 263.168a194.885 194.885 0 0 0-13.024 8.576 16.035 16.035 0 0 0-5.601 5.663 13.306 13.306 0 0 0-1.024 5.565c0.107 1.9 0.107 3.799 0 5.693-0.16 1.28-0.512 2.56-0.579 3.87a6.4 6.4 0 0 0 0.195 1.92 4.045 4.045 0 0 0 0.926 1.695 4.9 4.9 0 0 0 2.176 1.25c0.799 0.255 1.628 0.383 2.463 0.573a24.232 24.232 0 0 1 10.337 6.016c3.01 2.687 5.698 5.729 8.831 8.289a49.667 49.667 0 0 0 30.622 9.922 138.065 138.065 0 0 0 32.382-4.51A195.847 195.847 0 0 0 544 310.874a109.4 109.4 0 0 0 33.79-20.126 115.86 115.86 0 0 1 13.788-11.422c4.48-2.816 9.6-4.675 14.049-7.363 0.41-0.235 0.809-0.501 1.177-0.798s0.681-0.666 0.901-1.086a3.195 3.195 0 0 0 0-2.401 6.45 6.45 0 0 0-0.993-2.017 14.51 14.51 0 0 0-1.884-1.92 30.156 30.156 0 0 0-17.469-6.052c-6.4-0.481-12.58 0-18.754-1.182a122.593 122.593 0 0 1-16.956-4.926 123.628 123.628 0 0 0-18.022-4.382 119.035 119.035 0 0 0-43.354 1.06 126.674 126.674 0 0 0-38.399 14.975\\\" fill=\\\"#604405\\\" p-id=\\\"86651\\\"></path><path d=\\\"M450.342 248.034a79.49 79.49 0 0 0-17.15 15.646 37.026 37.026 0 0 0-6.785 11.392 86.171 86.171 0 0 0-2.206 10.24 19.046 19.046 0 0 0-0.574 3.87c0 0.65 0.098 1.295 0.287 1.92a4.362 4.362 0 0 0 0.993 1.695 5.424 5.424 0 0 0 2.883 1.438c1.054 0.226 2.14 0.256 3.2 0.384a30.156 30.156 0 0 1 13.372 5.694c4.035 2.785 7.742 5.985 11.873 8.606a62.031 62.031 0 0 0 30.811 8.765 137.717 137.717 0 0 0 32.158-3.2 144.716 144.716 0 0 0 24.8-6.973 148.832 148.832 0 0 0 33.79-20.126 141.393 141.393 0 0 0 13.788-11.422c1.47-1.408 2.882-2.883 4.45-4.163a16.05 16.05 0 0 1 5.247-3.04 19.455 19.455 0 0 1 9.18-0.16c2.268 0.502 4.587 0.769 6.911 0.8a10.25 10.25 0 0 0 3.426-0.543 6.963 6.963 0 0 0 2.815-2.018 6.721 6.721 0 0 0 1.47-4.254 8.632 8.632 0 0 0-1.244-4.352 14.888 14.888 0 0 0-7.04-5.662 69.373 69.373 0 0 0-12.032-3.523 172.69 172.69 0 0 1-36.191-13.22c-5.724-2.846-11.29-5.98-16.957-9.02a99.923 99.923 0 0 0-18.017-8.003 70.812 70.812 0 0 0-43.36 1.951 92.832 92.832 0 0 0-39.964 27.355\\\" fill=\\\"#F5BD0C\\\" p-id=\\\"86652\\\"></path><path d=\\\"M522.531 230.463c0.763 2.494 4.767 2.079 7.07 3.2 2.3 1.121 3.651 3.2 5.92 3.395s5.57-0.768 5.856-2.914c0.384-2.846-3.773-4.674-6.4-5.693a13.67 13.67 0 0 0-11.104-0.225c-0.773 0.445-1.603 1.408-1.342 2.237z m-38.178-1.408c-2.974-0.962-7.869 4.255-6.4 6.943 0.45 0.737 1.792 1.664 2.688 1.182 0.896-0.48 2.494-3.455 3.968-4.48 1.121-0.732 0.896-3.291-0.256-3.645z\\\" fill=\\\"#CD8907\\\" p-id=\\\"86653\\\"></path><path d=\\\"M959.388 848.499a56.712 56.712 0 0 1-9.405 15.84 102.6 102.6 0 0 1-33.059 23.449 655.292 655.292 0 0 0-61.53 32.48 252.984 252.984 0 0 0-36.289 29.213 290.584 290.584 0 0 1-29.5 26.782 84.86 84.86 0 0 1-36.734 15.549 88.06 88.06 0 0 1-47.773-7.23 57.331 57.331 0 0 1-26.587-20.801 62.492 62.492 0 0 1-7.454-33.15 345.162 345.162 0 0 1 7.265-60.383c2.938-16.604 5.76-33.243 7.551-50.041a515.256 515.256 0 0 0 1.06-91.926 69.68 69.68 0 0 1 0-15.39 19.552 19.552 0 0 1 19.9-18.242 71.575 71.575 0 0 1 14.177 1.178 299.737 299.737 0 0 1 33.054 5.729c6.814 1.792 13.47 4.188 20.29 6.051a93.15 93.15 0 0 0 34.968 3.2 270.55 270.55 0 0 1 37.502-5.888 55.52 55.52 0 0 1 15.324 2.688 32.649 32.649 0 0 1 13.762 7.68 30.135 30.135 0 0 1 6.4 10.234 62.142 62.142 0 0 1 3.906 17.536c0.174 5.355 0.635 10.695 1.377 15.999a52.222 52.222 0 0 0 11.775 23.167 149.851 149.851 0 0 0 19.005 17.791c6.692 5.632 13.409 11.202 20.607 16 3.39 2.298 6.881 4.48 10.081 7.004a31.753 31.753 0 0 1 8.161 9.087 22.594 22.594 0 0 1 2.268 15.994\\\" fill=\\\"#F5BD0C\\\" p-id=\\\"86654\\\"></path><path d=\\\"M959.388 848.499a56.712 56.712 0 0 1-9.405 15.84 102.6 102.6 0 0 1-33.059 23.449 655.292 655.292 0 0 0-61.53 32.48 252.984 252.984 0 0 0-36.289 29.213 290.584 290.584 0 0 1-29.5 26.782 84.86 84.86 0 0 1-36.734 15.549 88.06 88.06 0 0 1-47.773-7.23 57.331 57.331 0 0 1-26.587-20.801 62.492 62.492 0 0 1-7.454-33.15 345.162 345.162 0 0 1 7.265-60.383c2.938-16.604 5.76-33.243 7.551-50.041a515.256 515.256 0 0 0 1.06-91.926 69.68 69.68 0 0 1 0-15.39 19.552 19.552 0 0 1 19.9-18.242 71.575 71.575 0 0 1 14.177 1.178 299.737 299.737 0 0 1 33.054 5.729c6.814 1.792 13.47 4.188 20.29 6.051a93.15 93.15 0 0 0 34.968 3.2 270.55 270.55 0 0 1 37.502-5.888 55.52 55.52 0 0 1 15.324 2.688 32.649 32.649 0 0 1 13.762 7.68 30.135 30.135 0 0 1 6.4 10.234 62.142 62.142 0 0 1 3.906 17.536c0.174 5.355 0.635 10.695 1.377 15.999a52.222 52.222 0 0 0 11.775 23.167 149.851 149.851 0 0 0 19.005 17.791c6.692 5.632 13.409 11.202 20.607 16 3.39 2.298 6.881 4.48 10.081 7.004a31.753 31.753 0 0 1 8.161 9.087 22.594 22.594 0 0 1 2.268 15.994M263.03 678.43a30.376 30.376 0 0 1 17.054-1.571 42.105 42.105 0 0 1 16 6.753 100.604 100.604 0 0 1 23.453 25.307c15.615 21.498 30.621 43.446 44.255 66.235 11.039 18.492 21.18 37.6 33.95 54.97 8.32 11.33 17.724 21.857 26.11 33.151a114.248 114.248 0 0 1 19.522 37.15 74.467 74.467 0 0 1-5.442 53.307 70.346 70.346 0 0 1-25.983 27.867 66.926 66.926 0 0 1-36.796 9.6 180.427 180.427 0 0 1-58.335-18.401c-38.685-15.42-80.729-20.249-120.596-32.25-12.257-3.68-24.32-8.063-36.638-11.458a108.36 108.36 0 0 1-16.224-5.18 28.077 28.077 0 0 1-12.8-10.752 24.319 24.319 0 0 1-3.2-12.8 39.56 39.56 0 0 1 2.591-12.8c3.005-8.258 7.838-15.743 11.105-23.904a100.348 100.348 0 0 0 5.565-42.36c-0.706-14.341-3.2-28.544-4.034-42.88-0.63-6.399-0.425-12.85 0.609-19.198a28.804 28.804 0 0 1 24.222-24.642 78.23 78.23 0 0 1 17.663-1.121 167.776 167.776 0 0 0 17.725 0 40.585 40.585 0 0 0 16.926-4.736 40.108 40.108 0 0 0 12.16-11.484 139.376 139.376 0 0 0 8.703-14.402 91.916 91.916 0 0 1 9.154-14.11 34.866 34.866 0 0 1 13.183-10.24\\\" fill=\\\"#F5BD0C\\\" p-id=\\\"86655\\\"></path><path d=\\\"M263.03 678.43a30.376 30.376 0 0 1 17.054-1.572 42.105 42.105 0 0 1 16 6.753 100.604 100.604 0 0 1 23.453 25.307c15.615 21.498 30.621 43.446 44.255 66.235 11.039 18.492 21.18 37.6 33.95 54.97 8.32 11.33 17.724 21.857 26.11 33.151a114.248 114.248 0 0 1 19.522 37.15 74.467 74.467 0 0 1-5.442 53.307 70.346 70.346 0 0 1-25.983 27.867 66.926 66.926 0 0 1-36.796 9.6 180.427 180.427 0 0 1-58.335-18.401c-38.685-15.42-80.729-20.249-120.596-32.25-12.257-3.68-24.32-8.063-36.638-11.458a108.36 108.36 0 0 1-16.224-5.18 28.077 28.077 0 0 1-12.8-10.752 24.319 24.319 0 0 1-3.2-12.8 39.56 39.56 0 0 1 2.591-12.8c3.005-8.258 7.838-15.743 11.105-23.904a100.348 100.348 0 0 0 5.565-42.36c-0.706-14.341-3.2-28.544-4.034-42.88-0.63-6.399-0.425-12.85 0.609-19.198a28.804 28.804 0 0 1 24.222-24.642 78.23 78.23 0 0 1 17.663-1.121 167.776 167.776 0 0 0 17.725 0 40.585 40.585 0 0 0 16.926-4.736 40.108 40.108 0 0 0 12.16-11.484 139.376 139.376 0 0 0 8.703-14.402 91.916 91.916 0 0 1 9.154-14.11 34.866 34.866 0 0 1 13.183-10.24\\\" fill=\\\"#F5BD0C\\\" p-id=\\\"86656\\\"></path><path d=\\\"M271.477 687.804a26.183 26.183 0 0 1 15.457-1.024 36.243 36.243 0 0 1 13.982 6.845 88.419 88.419 0 0 1 19.548 24.288c13.28 21.503 26.238 43.201 38.398 65.375a433.093 433.093 0 0 0 29.536 49.053c7.552 10.168 16.189 19.486 23.9 29.53a99.728 99.728 0 0 1 18.016 33.182 65.375 65.375 0 0 1-4.992 47.547 63.352 63.352 0 0 1-23.997 25.082 61.724 61.724 0 0 1-33.693 8.32 188.5 188.5 0 0 1-53.404-16.537c-33.755-12.262-70.392-13.89-104.95-23.459-12.416-3.353-24.51-7.869-36.991-11.002a112.605 112.605 0 0 1-16.384-4.736 26.556 26.556 0 0 1-13.025-10.562 23.116 23.116 0 0 1-2.815-12.221 38.194 38.194 0 0 1 2.718-12.354c3.006-7.905 7.741-15.068 10.782-22.973a88.624 88.624 0 0 0 4.322-37.855c-0.86-12.795-3.2-25.436-3.84-38.204a65.257 65.257 0 0 1 0.768-17.09 29.336 29.336 0 0 1 7.68-15.068 29.89 29.89 0 0 1 16.639-7.71 77.078 77.078 0 0 1 18.559 0c6.17 0.747 12.38 1.04 18.59 0.86a34.866 34.866 0 0 0 17.602-5.37 35.183 35.183 0 0 0 10.849-12.8 135.617 135.617 0 0 0 6.594-15.426 72.977 72.977 0 0 1 7.424-15.073 29.065 29.065 0 0 1 12.8-10.808\\\" fill=\\\"#F5BD0C\\\" p-id=\\\"86657\\\"></path></svg>Linux初阶\",\"collapsed\":false,\"items\":[{\"text\":\"引入\",\"link\":\"/Linux/introduction\"},{\"text\":\"安装\",\"link\":\"/Linux/install\"},{\"text\":\"包管理器\",\"link\":\"/Linux/package-mgr\"}]}],\"editLink\":{\"pattern\":\"https://github.com/DevBeginner-Doc/DevBeginner-Doc/edit/main/docs/:path\",\"text\":\"在 GitHub 上编辑此页面\"},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"outline\":{\"label\":\"页面导航\",\"level\":\"deep\"},\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"langMenuLabel\":\"多语言\",\"returnToTopLabel\":\"回到顶部\",\"sidebarMenuLabel\":\"菜单\",\"darkModeSwitchLabel\":\"主题\",\"lightModeSwitchTitle\":\"切换到浅色模式\",\"darkModeSwitchTitle\":\"切换到深色模式\"}}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>